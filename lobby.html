<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlipCards Lobby</title>
     <link rel="stylesheet" href="lobby.css">
     <link rel="icon" type="image/png" sizes="32x32" href="Group-100.png">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4779578721359852"
     crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.1/dist/tesseract.min.js"></script>


</head>
<body>
    <header class="navhead">
        <div class="container">
            <div class="left-side">
                 <button id="menu-toggle" class="menu-toggle">&#9776;</button>
                <div class="logo"><a href="#" id="admin-link"><img class="group-5" src="group-5.svg" /></a></div>
                <div class="TTitle">FlipCards.</div>
            </div>
            <nav class="side-nav" id="sideNav">
                <div class="side-content">
                    <div class="nav-wrapper">
                        <ul id="navmenu" class="navmenu">
                            <li><a href="#About" class="About">About Us</a></li>
                            <li><a href="#How" class="How">How it Works</a></li>
                            <li><a href="#featuress" class="Features">Features</a></li>
                            <li>
                        <a href="#Folderr" class="Features">
                        Folder
                        </a>
                    </li>
                            <li>
                                <a href="addcard.html"><button class="getstarted2" style="text-decoration: none;">
                                    <img class="group-82" src="group-8.png" />Get Started
                                </button></a>
                            </li>
                            
                        </ul>
                    </div>
                        <div class="rayt">
                            <div class="rights">FlipCards.</div>
                        </div>
                </div>
            </nav>


                <ul id="navmenu" class="navmenu">
                    <li>
                        <a href="#About" class="About">
                        About Us
                        </a>
                    </li>
                    <li>
                        <a href="#How" class="How">
                        How it Works
                        </a>
                    </li>
                    <li>
                        <a href="#featuress" class="Features">
                        Features
                        </a>
                    </li>
                    <li>
                        <a href="#Folderr" class="Features">
                        Folder
                        </a>
                    </li>            
                    <li>
                        <a href="addcard.html"><button class="getstarted" >
                        <img class="group-8" src="group-8.png" />Get Started
                        </button></a>
                    </li>    
                    <!-- Gemini Button -->
<!-- Gemini Button -->
                    <li>
                        <a href="#Folderr" class="getstarted folder-getstarted2">
                        ParseCards<img src="beta.png" alt="Beta" style="height: 19px;" />
                        </a>
                    </li>  

 
                </ul>
        </div>
    </header>
   <!-- Gemini Upload Modal -->
<div class="gemini-modal-backdrop" id="geminiModal">
  <div class="gemini-modal-content">
    <span class="gemini-modal-close" id="closeGeminiModal">&times;</span>
    <h2 class="gemini-modal-title" style="display: flex; align-items: center; gap: 10px;">
  Upload a JPG files to Generate Flashcards
  <img src="beta.png" alt="Beta" style="height: 19px;" />
</h2>


<!-- New Neumorphic Button -->
<button class="neumorphic-button" style="display: block; margin: 0 auto 20px;" onclick="openParsecardsModal()">
  How to properly use ParseCards
</button>

    <div class="gemini-dropzone" id="geminiDropZone">ğŸ“‚ Click to upload .jpg files</div>
    <input type="file" id="geminiFileInput" accept=".jpg,.jpeg" style="display: none;" />
    <span class="gemini-modal-title2">Note: FlipCard's JPG Auto Parser can make mistakes.<span class="gemini-modal-title2">More Accurate on JPG files with Less Complex Design. Please Follow the Rules on How to Use it.</span></span>
    <div class="gemini-flashcards" id="geminiFlashcards"></div>
    <a href="addcard.html" id="gotoAddcardBtn" style="display: none;">
  <button class="neumorphic-button2" style="margin-top: 20px; width: 100%; font-size: 14px;">
    â• Go to Addcard Set!
  </button>
</a>

<div id="geminiUsage" style="margin-top: 15px; text-align: center; font-size: 14px; color: #ffffff;background: transparent;">
  Uses left: <span id="geminiUsageCount">3</span> <span>/3</span>

</div>

  </div>
</div> 
    <section class="catchphrase">
      <!-- Social Modal -->
<div class="social-container">
  <button id="socialToggleBtn" class="social-toggle-btn">
    <img src="glassarrowdown.png" alt="Toggle Social" id="socialArrow">
  </button>

  <div id="socialModal" class="social-modal">
    <div class="social-column">
      <a href="https://www.facebook.com/Raaaph.28" target="_blank" class="social-icon fb" aria-label="Visit Facebook">
        <img src="glassfbnc.png" id="epbe" alt="Facebook" data-hover="glassfbc.png" data-default="glassfbnc.png">
      </a>
      <a href="https://instagram.com/rph.wy" target="_blank" class="social-icon">
        <img src="glassignc.png" data-hover="glassigc.png" data-default="glassignc.png">
      </a>
      <a href="https://twitter.com" target="_blank" class="social-icon">
        <img src="glassxnc.png" data-hover="glassxc.png" data-default="glassxnc.png">
      </a>
      <a href="https://discord.com/users/raaaph28" target="_blank" class="social-icon">
        <img src="dcglassnc.png" data-hover="dcglassc.png" data-default="dcglassnc.png">
      </a>
      <a href="https://www.threads.net/@rph.wy" target="_blank" class="social-icon">
        <img src="tridncglass.png" data-hover="tridcglass.png" data-default="tridncglass.png">
      </a>
      <a href="https://www.tiktok.com/@raaaphbrrt" target="_blank" class="social-icon">
        <img src="tiktokglassnc.png" data-hover="tiktokglassc.png" data-default="tiktokglassnc.png">
      </a>
    </div>
  </div>
</div>

        <div class="container2">
            <div class="catch-text">
                 <h1>
                    Read. Review. 
                    Remember. <span>Repeat.</span>
                </h1>
                <h6 class="typing-line">
  <span id="typingText"></span>
</h6>

            </div>
            <article class="article-wrapper">
  <div class="rounded-lg container-project" id="user-card-image-container">
  <img id="user-card-image" src="" alt="User card image" class="user-card-photo" style="display: none;">
  <button id="user-card-add-photo-btn" class="add-photo-btn">Add Photo</button>
  <input type="file" id="user-card-photo-input" accept="image/*" style="display: none;">
</div>
    <div class="project-info">
      <div class="flex-pr">
        <div class="project-text-wrapper">
 <div class="project-title" id="user-card-username-container"></div>
  <div class="project-subtitle" id="user-card-email">...</div>
</div>
          <div class="project-hover">
            <svg style="color: rgb(0, 0, 0);" xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" color="black" stroke-linejoin="round" stroke-linecap="round" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke="currentColor"><line y2="12" x2="19" y1="12" x1="5"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
            </div>
          </div>
          


<div class="card-footer">
 <div class="types" id="user-card-roles-container">
  </div>
  <div id="user-card-color-picker" class="color-picker">
    <div class="color-swatch" data-color="#FFFFFF" style="background-color: #FFFFFF; border: 1px solid #ddd;"></div>
    <div class="color-swatch" data-color="#FFADAD" style="background-color: #FFADAD;"></div>
    <div class="color-swatch" data-color="#FFD6A5" style="background-color: #FFD6A5;"></div>
    <div class="color-swatch" data-color="#FDFFB6" style="background-color: #FDFFB6;"></div>
    <div class="color-swatch" data-color="#CAFFBF" style="background-color: #CAFFBF;"></div>
    <div class="color-swatch" data-color="#9BF6FF" style="background-color: #9BF6FF;"></div>
    <div class="color-swatch" data-color="#A0C4FF" style="background-color: #A0C4FF;"></div>
    <div class="color-swatch" data-color="#BDB2FF" style="background-color: #BDB2FF;"></div>
    <div class="color-swatch" data-color="#FFC6FF" style="background-color: #FFC6FF;"></div>
  </div>
  <button id="user-card-palette-btn" class="palette-btn">ğŸ¨</button>
</div>
  </div>
</article>
        </div>
<div class="musicrow">
      
        <div class="tooltip-container" data-tooltip="Music">
  <button class="music-icon music" aria-label="Toggle Music">
    <img src="musicnc.png" alt="Music" data-hover="musicc.png" data-default="musicnc.png">
  </button>
</div>

<div class="tooltip-container" data-tooltip="Profile">
  <button class="music-icon profile" aria-label="Profile" onclick="showLoader()">
    <img src="profilenc.png" alt="Profile" data-hover="profilec.png" data-default="profilenc.png">
  </button>
</div>

<div class="tooltip-container" data-tooltip="FlipNotes">
  <button class="music-icon notes" aria-label="Notes">
    <img src="notenc.png" alt="Notes" data-hover="notec.png" data-default="notenc.png">
  </button>
</div>

<div class="tooltip-container" data-tooltip="Leaderboards">
  <button id="leaderboardsBtn" class="music-icon notes" aria-label="Leaderboards">
    <img src="leadnc.png" alt="Leaderboards" data-hover="leadc.png" data-default="leadnc.png">
  </button>
</div>
<!-- Chat button -->
<div class="tooltip-container" data-tooltip="Chat">
  <a href="chat.html" class="chat-link">
    <button class="music-icon chat" aria-label="Chat" id="chatIconButton">
      <span id="chatDot" class="chat-dot" style="display: none;"></span>
      <img src="chatnc.png" alt="Chat" data-hover="chatc.png" data-default="chatnc.png">
    </button>
  </a>
</div>

<!-- Members button -->
<div class="tooltip-container" data-tooltip="Members">
  <button class="music-icon" id="openMemberList" aria-label="Members">
    <img src="memnc.png" alt="Members" data-hover="memc.png" data-default="memnc.png">
  </button>
</div>

<!-- FlipTimer button -->
<div class="tooltip-container" data-tooltip="FlipTimer">
  <button class="music-icon" id="pomodoroToggleBtn" aria-label="FlipTimer">
    <img src="timernc.png" alt="FlipTimer" data-hover="timerc.png" data-default="timernc.png">
  </button>
</div>
<!-- Shop button -->
<div class="tooltip-container" data-tooltip="Shop">
  <button class="music-icon" id="shopBtn" aria-label="Shop">
    <img src="shopnc.png" alt="Shop" data-hover="shopc.png" data-default="shopnc.png">
  </button>
</div>




    </div>
<div id="musicModal" class="music-modal">
  <div id="musicModalHeader" class="music-modal-header">ğŸ§ Community Playlist
     <div class="music-header-buttons">
      <button id="howToUseMusicBtn" class="music-howto-btn" title="How to Use">?</button>
      <span id="closeMusicModalBtn" class="music-modal-close">&times;</span>
    </div>
  </div>
  <div class="music-modal-content">

    <div class="spotify-input-container">
      <p>Paste a Spotify Embed Code here:</p>
      <textarea id="spotifyCodeInput" class="neumorphic-search" placeholder="<iframe src=...></iframe>"></textarea>
      <button id="addSpotifyCodeBtn" class="neumorphic-button">Add to Playlist</button>
      <small id="spotifyErrorText" class="spotify-error"></small>
    </div>

    <div id="spotifyPlayerContainer">
      </div>

  </div>
  <!-- â–¼â–¼â–¼ ADD THIS NEW FOOTER BLOCK â–¼â–¼â–¼ -->
  <div class="music-modal-footer">
    <button id="minimizeMusicModalBtn" class="neumorphic-button">Minimize</button>
  </div>
  <!-- â–²â–²â–² END OF NEW FOOTER â–²â–²â–² -->
</div>
<div id="howToUseMusicModal" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <h3 style="margin-top: 0; font-family: 'Satoshi', sans-serif;">How to Use the Playlist</h3>
    <p id="customAlertMessage" style="font-size: 15px; line-height: 1.6;">
      To enjoy full music playback instead of 30-second previews, please make sure you are logged into your account on the Spotify Web Player in this browser.
      <br/><br/>
      As a user, you can also add your favorite Spotify playlists to this shared collection for everyone to enjoy!
    </p>
    <button id="howToUseMusicOkBtn" class="neumorphic-button">Got it</button>
  </div>
</div>

<!-- Notes Modal -->
<div id="noteBackdrop" class="note-backdrop hidden" aria-hidden="true">
  <div id="noteModal" class="note-modal" role="dialog" aria-modal="true" aria-labelledby="noteTitle">
    <div class="note-topbar">
      <h3 id="noteTitle" class="note-title">FlipNotes<img src="beta.png" alt="Beta" style="height: 19px; margin-left: 6px; margin-top: 5px;" /></h3>

      <div class="note-controls">
        <div class="note-search-wrap">
          <input id="noteSearch" type="text" placeholder="Search notesâ€¦" aria-label="Search notes">
          
        </div>

        <button id="noteAddBtn" class="note-icon-btn" title="New note" aria-label="New note">+</button>
        <button id="noteCloseBtn" class="note-icon-btn close" title="Close" aria-label="Close">Ã—</button>
      </div>
    </div>

    <div id="noteList" class="note-list" aria-live="polite"></div>
  </div>
</div>
<!-- Note Preview Modal (opens on top of Notepad modal) -->
<div id="notePreviewBackdrop" class="note-preview-backdrop hidden" aria-hidden="true">
  <div id="notePreviewModal" class="note-preview-modal" role="dialog" aria-modal="true" aria-labelledby="notePreviewTitle">
    <div class="note-preview-topbar">
      <h4 id="notePreviewTitle" class="note-preview-title">(Untitled)</h4>
      <button id="notePreviewCloseBtn" class="note-icon-btn close" title="Close preview" aria-label="Close preview">Ã—</button>
    </div>
    <div class="note-preview-body" id="notePreviewBody"></div>
  </div>
</div>




    </section>
    <section class="folder-section" id="Folderr">
  <h2 class="features-title" style="color: white;">Flashcard Folders</h2>
  <a href="addcard.html">
  <button class="getstarted folder-getstarted">
    <img class="group-8" src="group-8.png" />Add More Card Sets!
  </button>
</a>
<a href="addcard_image.html">
  <button class="getstarted folder-getstarted imagee hover-switch" style="margin-top: -12px;">
    <img src="imahenc.png" data-hover="imahec.png" data-default="imahenc.png" style="width: 40px; height: 40px;" />
    Use Image as Definition
  </button>
</a>
<button class="quibbl-btn hover-switch" onclick="location.href='Quibbl.html'">
  Quibbl
  <img src="new.png" alt="New" class="quibbl-new-icon">
</button>

                      <button id="geminiBtn" class="getstarted folder-getstarted">
                          <img class="group-8 hover-switch" src="gemininc.png" data-default="gemininc.png" data-hover="geminic.png" />
                      </button>
                   

  <div style="margin: 20px auto; max-width: 300px; margin-bottom: 60px;">
    <input id="folderSearch" type="text" class="neumorphic-search" placeholder="Search folders, Category...Emails or Users...">
<div class="neumorphic-select-wrapper">
  <select id="folderFilter" class="neumorphic-select">
    <option value="your" selected>Your Flashcard Sets</option>
    <option value="public">Public Flashcard Sets</option>
    <option value="liked">â¤ï¸ Liked FlashCard Sets</option>
  </select>
  <span class="chevron">&#x25BE;</span>
</div>

  </div>
  <div class="folder-grid">
    
  </div>
  

</section>
<section id="generalQuestions">
  <div class="general-header">
    <h2 class="general-title">General Questions</h2>

    <button class="general-btn">
      <img src="whiteplus.png" alt="Add Question">
    </button>
    

  </div>
  <div class="general-header" style="margin-top: -90px; margin-left: -100px;">Share a question, build collective answers!</div>
<div style="display: flex; flex-direction: column; align-items: flex-start;">
    <button id="refreshQuestions" class="neumorphic-button2" style="font-size: 13px; padding: 6px 14px; margin-bottom: 4px;">ğŸ” Refresh</button>
    <span style="font-size: 11px; color: #666;">Not seeing your question/answer? Refresh it!</span>
  </div>
  <div class="questions-list"></div>

</section>
<section id="classFavorite" class="class-favorite">
  <div class="class-favorite-header container">
    <div class="class-favorite-header">
  <h2 class="class-favorite-title">Class Favorite</h2>
  <p class="class-favorite-subtitle">Flipcards Most Liked Flashcard Sets Creators</p>
</div>


  </div>
  <div class="class-favorite-body container">
    <!-- TODO: Populate this list dynamically with top creators -->
    <div class="class-favorite-list" aria-live="polite">
      <!-- Example creator card -->
      <div class="class-favorite-card">
        <div class="creator-name"></div>
        <div class="creator-meta"></div>
      </div>
      <div class="class-favorite-card">
        <div class="creator-name"></div>
        <div class="creator-meta"></div>
      </div>
    </div>
  </div>
</section>

<section class="featuress" id="featuress">
  <h2 class="features-title">Our Features</h2>
  <div class="features-grid">
  <div class="feature-box">
    <h3>Flashcard Creation</h3>
    <p>Easily create flashcards with custom questions and answers.</p>
  </div>
  <div class="feature-box">
    <h3>Custom Decks</h3>
    <p>Group your flashcards into decks for organized study sessions.</p>
  </div>
  <div class="feature-box">
    <h3>Many Modes to Review</h3>
    <p>Master any topic using Flashcards, Learn, Match, DefiDrop, and Test modes for flexible, effective studying.</p>
  </div>
  <div class="feature-box">
    <h3>System Update Every Week</h3>
    <p>Enjoy regular updates with bug fixes, UI improvements, and new feature rollouts every week.</p>
  </div>
  <div class="feature-box">
    <h3>Dark Mode</h3>
    <p>Reduce eye strain and study comfortably at night.</p>
  </div>
  <div class="feature-box">
    <h3>Interact with Other Users</h3>
    <p>Browse and study from public card sets shared by others to expand your learning and connect with the community.</p>
  </div>
</div>
<div id="deleteModal" class="custom-modal hidden">
  <div class="modal-content">
    <div class="modal-message" id="deleteMessage">Are you sure you want to delete?</div>
    <div class="modal-buttons">
      <button id="confirmDelete" class="neumorphic-button">Okay</button>
      <button id="cancelDelete" class="neumorphic-button">Cancel</button>
      
    </div>
  </div>
</div>
<div id="comingSoonModal" class="custom-modal hidden">
  <div class="modal-content">
    <div class="modal-message">âœ¨ Coming Soon!</div>
    <div class="modal-buttons">
      <button id="closeComingSoon" class="neumorphic-button">OK</button>
    </div>
  </div>
</div>

</section>
<section id="About" class="about-section">
  <div class="about-container">
    <h2 class="about-title">About Us</h2>
    <p class="about-description">
      We believe that quality education should be accessible to everyone. Thatâ€™s why we built this platformâ€”to provide students with a premium learning experience without the high costs found on other websites. Our goal is to support learners who may be struggling financially by offering powerful study tools, regular updates, and a vibrant communityâ€”all for free or at a minimal cost. Learning should empower, not burdenâ€”and weâ€™re here to make that a reality.
    </p>
  </div>
</section>
<footer class="custom-footer">
  <p class="footer-text">
    Found any Bugs or Do you have Recommendations? Message us!
  </p>

  <a href="https://mail.google.com/mail/?view=cm&fs=1&to=taberdoraphael189@gmail.com" target="_blank" class="footer-gmail">
    <img src="gmeylnc.png" alt="Gmail" class="hover-switch" data-hover="gmeylc.png" data-default="gmeylnc.png">
  </a>

  <a href="https://www.facebook.com/Raaaph.28" target="_blank" class="footer-gmail" aria-label="Visit Facebook">
    <img src="facebooknc.png" alt="Facebook" class="hover-switch" data-hover="Facebookc.png" data-default="facebooknc.png">
  </a>

  <a href="https://instagram.com/rph.wy" target="_blank" class="footer-gmail">
    <img src="instanc.png" alt="Instagram" class="hover-switch" data-hover="instac.png" data-default="instanc.png">
  </a>
  <a href="privacy-policy.html" target="_blank" class="footer-gmail">
    <img src="privnc.png" alt="Instagram" class="hover-switch" data-hover="privc.png" data-default="privnc.png">
  </a>
  <div class="footer-logo">
  <img src="group-5.svg" alt="Site Logo"><h1>FlipCards.</h1>
</div>
</footer>
<!-- Profile Modal -->
<!-- Redesigned Profile Modal -->
<div id="profileModal" class="custom-modal2 hidden" style="top: 80px; left: 20px; right: auto; bottom: auto; justify-content: flex-start; align-items: flex-start;">
 
  <div class="profile-box">
    <div id="profileDragHandle" class="drag-handle">
    <span class="close-profile-modal">âœ–</span>
  </div>
    <div class="cover-photo-container">
  <img src="defaultcover.jpg" id="coverPreview" alt="Cover" />
  <label for="coverInput" class="edit-cover">ğŸ“·</label>
  <input type="file" id="coverInput" accept="image/*" hidden />
</div>

<div class="avatar-container">
  <img src="Group-10.png" id="avatarPreview" alt="Avatar" />
  <label for="avatarInput" class="edit-avatar">ğŸ“·</label>
  <input type="file" id="avatarInput" accept="image/*" hidden />
</div>

    <div class="profile-info">
  <div class="username-row">
    <div id="userName">Your Username</div>
    <span id="userBadgeContainer"></span>
  </div>
  <div id="userEmail">you@email.com</div>
  <button class="edit-username">âœï¸ Edit Username</button>
  <div class="user-level-display">
  <div id="userLevelText">Level 1</div>
  <div class="xp-bar">
    <div id="xpFill" class="xp-fill"></div>
  </div>
  <div id="xpText">0 / 1200 XP</div>
  <div id="profileBadges" class="badge-container achievement-badges"></div>

</div>

</div>

    <div class="modal-buttons profile-actions">
  <button class="neumorphic-button profile-leaderboard-btn" id="openAchievementsFromProfile">ğŸ† Achievements</button>
  <button class="neumorphic-button profile-settings-btn" onclick="alert('Settings coming soon')">âš™ï¸ Settings</button>
  <a href="index.html"><button class="neumorphic-button profile-logout-btn">ğŸšª Logout</button></a>
</div>

  </div>
</div>

<div id="welcomeModal" class="custom-modal hidden">
  <div class="modal-content" style="background: #171717; border: 1px solid white; border-radius: 20px; padding: 0; box-shadow: inset 8px 8px 16px #0f0f0f, inset -8px -8px 16px #1f1f1f; color: white; font-family: 'Accasia'; text-align: center; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden;">
    
    <div class="welcome-scroll-content">
      <div style="padding: 30px;">
        <h2 style="margin-bottom: 15px;">ğŸ‰ Welcome to FlipCards!</h2>
        <p style="font-size: 15px; line-height: 1.5;">We're excited to share new updates with you:</p>
        <ul style="text-align: left; margin: 20px auto; font-size: 14px; line-height: 1.6;">
          <li>ğŸ“… New features in this Update:   08/23/25</li>
          <li>Major FlipNotes Upgrade: Class Feature is Here! ğŸ“</li>
          <li>âœ¨ Whatâ€™s New in FlipNotes:</li>
          <span class="sub-announcement">â¥You can now create your own classes right inside FlipNotes. Invite friends, classmates, and other users to join, share your notes, and collaborate like never before. ğŸ¤</span>
          <li>Undo & Redo Buttons Added ğŸ¨</li>
          <span class="sub-announcement">â¥ We've added Undo and Redo buttons to the drawing toolbar in FlipNotes. Now you can easily fix any mistakes in your annotations. âœ¨</span>
          <li>ParseCards Improvements ğŸ‘</li>
          <span class="sub-announcement">â¥ We've made some minor tune-ups to ParseCards for a smoother experience.</span>
          <li>Music Modal Update ğŸ§</li>
          <span class="sub-announcement">â¥ The Music Modal has a new look! You can now paste an embedded code from a Spotify playlist, and everyone in the lobby can listen in. ğŸ¶</span>
          <li>ğŸ‘ï¸ğŸ‘ï¸ Visual Glitch Fixes</li>
          <li>ğŸ›  Bug Fixes
          </li>
          <br>
          <li>ğŸª² Found any Bugs? Message Us!</li>
        </ul>
      </div>
    </div>

    <div class="welcome-button-footer">
      <button id="dismissWelcome" class="neumorphic-button">Okay</button>
    </div>
  </div>
</div>
<div id="leaderboardModal" class="custom-modal hidden">
  <div class="leaderboard-box">
    <div class="leaderboard-header">
     <span class="leaderboard-title" style="display: flex; align-items: center; gap: 10px;">
  <img src="gemm.png" alt="Leaderboards" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 6px;">
  Leaderboards
  <span id="leaderboardCountdown" style="font-size: 14px; color: #ffcf00; font-family: 'Satoshi'; margin-left: 12px; background: transparent;">Loading...</span>
</span>


      <span class="leaderboard-dots">â‹¯</span>
    </div>

    <div class="leaderboard-section">
      <div class="section-title">Top 10 Highest Levels ğŸ–ï¸</div>
      <ul id="levelLeaderboard" class="leaderboard-list">
        
        <!-- Dynamically populate via JS -->
      </ul>
    </div>

    <div class="leaderboard-section">
      <div class="section-title">Top 10 DefiDrop Records ğŸ”¥</div>
      <ul id="defidropLeaderboard" class="leaderboard-list">
        <!-- Dynamically populate via JS -->
      </ul>
    </div>
    <div class="leaderboard-section">
  <div class="section-title">Top 10 Highest Stars Earned in Quibbl <img src="quibblstar.png" alt="Star" style="width: 18px; height: 18px; margin-right: 4px; margin-top: 5px;  border: none;"></div>
  <ul id="quibblLeaderboard" class="leaderboard-list">
    <!-- Dynamically populated via JS -->
  </ul> 
</div>

  </div>
</div>
<div id="achievementsModal" class="custom-modal hidden">
  <div class="achievements-box">
    <div class="achievements-header">
      <span class="achievements-title" id="achievementsTitle">ğŸ… Achievements</span>

      <span class="achievements-close" onclick="document.getElementById('achievementsModal').classList.add('hidden')">âœ–</span>
    </div>
    
    <!-- Fade-in grid added here -->
     <div id="flashcardStat" style="color: #ccc; font-size: 14px; margin-bottom: 20px;"></div>
    <div class="badge-grid fade-content">
      <div class="badge-card" id="flashcardBadge">
  <div class="badge-icon">ğŸ“˜</div>
  <div class="badge-label" id="flashcardCountLabel">Loading...</div>
</div>

      <div class="badge-card">
  <div class="badge-icon">âš¡</div>
  <div class="badge-label" id="defidropCountLabel">Loading...</div>
</div>

<div class="badge-card" id="quibblWinsBadge">
  <div class="badge-icon2">Quibbl Stars Earned:</div>
  <div class="badge-label" id="quibblWinsLabel">
    <img src="quibblstar.png" alt="star" class="star-icon" style="display:none;">
  </div>
</div>




      <div class="badge-card locked">
        <div class="badge-icon">ğŸ”’</div>
        <div class="badge-label">Coming Soon!</div>
      </div>
    </div>
  </div>
</div>



<!-- Member List Sidebar -->
<div id="memberSidebar" class="member-sidebar">

  <div class="member-header">ğŸ§‘â€ğŸ’» Registered Users <button id="closeMemberList" class="close-member-btn">&times;</button></div>
  <ul id="memberList" class="member-list">
    <!-- Members will be populated here -->
  </ul>
</div>
<!--FlipTimer Modal-->
<div id="flipTimerModal" class="flip-timer-modal hidden">
  <div class="flip-timer-header">
    <span class="flip-timer-title">ğŸ•’ FlipTimer</span>
    <span class="flip-timer-close" onclick="closeFlipTimer()">&times;</span>
  </div>
  <div class="flip-timer-body">
    <label for="studyMinutes">Study Minutes:</label>
    <input type="number" id="studyMinutes" min="1" max="180" placeholder="Enter minutes...">

    <h2 id="flipTimerLabel">Ready to Focus?</h2>
    <h1 id="flipTimerClock">00:00</h1>

    <div class="flip-timer-buttons">
      <button onclick="startFlipTimer()">Start</button>
      <button onclick="resetFlipTimer()">Reset</button>
      <button onclick="skipBreak()">Skip</button>
      <button onclick="pauseFlipTimer()" id="pauseButton">â¸ï¸ Pause</button>

    </div>

    <p>Breaks Taken: <span id="breakCounter">0</span></p>
    <div style="text-align: center; margin-top: 10px;">
  <button id="collapseBtn" onclick="collapseFlipTimer()" class="neumorphic-button" style="padding: 4px 12px; font-size: 12px;">â–² Collapse</button>
</div>

<!-- Minimized view -->


  </div>
</div>
<div id="flipTimerConfirm" class="flip-timer-confirm hidden">
  <div class="flip-timer-confirm-box">
    <p>Want to continue?</p>
    <div>
      <button onclick="confirmFlipTimerContinue(true)">Yes</button>
      <button onclick="confirmFlipTimerContinue(false)">No</button>
    </div>
  </div>
</div>
<div id="flipTimerMinimized" class="hidden" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  padding: 10px 16px;
  border-radius: 16px;
  font-family: 'QilkaBold';
  font-size: 16px;
  z-index: 3000;
  gap: 10px;
  align-items: center;
  box-shadow: 6px 6px 12px rgba(0,0,0,0.3), -6px -6px 12px rgba(255,255,255,0.05);
  cursor: pointer;
  border: 1px solid white;
  backdrop-filter: blur(8px);
  display: flex;
">
<span id="minBreakCounter">0</span>
  <span id="flipTimerMinClock">00:00</span>
   <button onclick="expandFlipTimer()" class="neumorphic-button" style="font-size: 12px; padding: 4px 10px;">â–² Expand</button>
</div>


<!-- ğŸ”” Live Announcement Modal -->
<div id="announcementStrip" class="announcement-strip hidden">
  <div id="announcementText" class="announcement-text"></div>
</div>
<div id="guestModal" class="modal-overlay" style="display: none;">
  <div class="modal-box">
    <p id="guestModalMessage"></p>
    <button onclick="closeGuestModal()">OK</button>
  </div>
</div>

<!-- Hidden form for adding question -->
<div id="questionModal" class="custom-modal hidden">
  <div class="modal-content2" style="background: white; border-radius: 20px; padding: 30px; max-width: 400px; width: 90%; box-shadow: 10px 10px 30px rgba(0,0,0,0.2); color: black; font-family: 'Accasia'; text-align: center;">
    <h3 style="margin-bottom: 20px;">Ask a General Question</h3>
    <input type="text" id="question-category" class="question-input" placeholder="Enter category" style="margin-bottom: 15px; width: 100%;">
    <input type="text" id="question-input" class="question-input" placeholder="Type your question..." style="margin-bottom: 15px; width: 100%;">
    <div style="display: flex; justify-content: center; gap: 12px;">
      <button id="submit-question" class="question-submit">Submit</button>
      <button id="cancel-question" class="question-submit" style="background: #aaa;">Cancel</button>
    </div>
  </div>
</div>
<div id="tutorialModal" class="custom-modal hidden">
  <div class="tutorial-content">
    <button class="tutorial-nav prev" onclick="changeTutorialSlide(-1)">â®</button>

    <div class="tutorial-slide" id="tutorialSlideContainer">
      <!-- JS will populate slides -->
    </div>

    <button class="tutorial-nav next" onclick="changeTutorialSlide(1)">â¯</button>
  </div>
  <div class="tutorial-dots" id="tutorialDots"></div>
  <button class="tutorial-close" onclick="closeTutorial()">âœ–</button>
</div>
<div id="shopModal" class="shop-modal hidden">
  <div class="shop-modal-content" style="background: #171717; padding: 20px; border-radius: 20px; box-shadow: inset 8px 8px 16px #0f0f0f, inset -8px -8px 16px #1f1f1f; color: white; font-family: 'Accasia';">
  
<div class="shop-modal-header">
  <span id="closeShopModal" class="shop-modal-close">&times;</span>
  <h2 class="shop-modal-title">Shop</h2>
</div>

  <!-- Container 3 -->
  <div class="shop-container" style="background: #171717; padding: 15px; border-radius: 16px; box-shadow: 6px 6px 12px #0f0f0f, -6px -6px 12px #1f1f1f;">
    <h3 class="verified-title">
  Interested in Becoming Verified?
  <img src="verified.svg" alt="Verified Badge" class="verified-badge">
</h3>


    <p style="margin-bottom: 8px;">Exclusive 3 Months of Benefits for Verified Users:</p>
    <ul style="padding-left: 15px; margin-bottom: 8px; line-height: 1.4;">
      <li>+20 Public Slots</li>
      <li>Verified Badge</li>
      <li>+50% XP Boost</li>
      <li>Instant +10 Levels</li>
      <li>Total of 15 Uses in ParseCards (base usage included)</li>
      <li>Immediate Upgrade to Bronze Spender</li>
    </ul>
    <p><strong>All of these for just 100 Pesos</strong></p>
    <div class="shop-contact">
  <span>Contact Us to Avail!</span>
  <div class="shop-socials">
    <a href="https://www.facebook.com/Raaaph.28" target="_blank" aria-label="Visit Facebook">
      <img src="facebooknc.png" alt="Facebook" class="hover-switch" data-hover="Facebookc.png" data-default="facebooknc.png">
    </a>
    <a href="https://instagram.com/rph.wy" target="_blank">
      <img src="instanc.png" alt="Instagram" class="hover-switch" data-hover="instac.png" data-default="instanc.png">
    </a>
  </div>
</div>

  </div>
  <!-- Container 1 -->
  <div class="shop-container" style="background: #171717; padding: 15px; margin-bottom: 20px; border-radius: 16px; box-shadow: 6px 6px 12px #0f0f0f, -6px -6px 12px #1f1f1f;">
    <h3 style="margin-bottom: 8px;">Need More Public Slots?</h3>
    <p>+5 Slots : <strong>20 Pesos</strong></p>
    <p>+10 Slots : <strong>35 Pesos</strong></p>
    <p style="font-size: 12px; color: #bbb; margin-top: 8px;">
      Tip: Inviting other users to claim slots for you is a better way to increase your public slots than direct purchases.
    </p>
    <div class="shop-contact">
  <span>Contact Us to Avail!</span>
  <div class="shop-socials">
    <a href="https://www.facebook.com/Raaaph.28" target="_blank" aria-label="Visit Facebook">
      <img src="facebooknc.png" alt="Facebook" class="hover-switch" data-hover="Facebookc.png" data-default="facebooknc.png">
    </a>
    <a href="https://instagram.com/rph.wy" target="_blank">
      <img src="instanc.png" alt="Instagram" class="hover-switch" data-hover="instac.png" data-default="instanc.png">
    </a>
  </div>
</div>

  </div>

  <!-- Container 2 -->
  <div class="shop-container" style="background: #171717; padding: 15px; margin-bottom: 20px; border-radius: 16px; box-shadow: 6px 6px 12px #0f0f0f, -6px -6px 12px #1f1f1f;">
    <h3 style="margin-bottom: 8px;">Want an Additional Account Slot?</h3>
    <p>Note: This second slot is tied to your current account, not a separate one.</p>
    <p><strong>2nd Account Slot: 50% off the standard price</strong></p>
    <div class="shop-contact">
  <span>Contact Us to Avail!</span>
  <div class="shop-socials">
    <a href="https://www.facebook.com/Raaaph.28" target="_blank" aria-label="Visit Facebook">
      <img src="facebooknc.png" alt="Facebook" class="hover-switch" data-hover="Facebookc.png" data-default="facebooknc.png">
    </a>
    <a href="https://instagram.com/rph.wy" target="_blank">
      <img src="instanc.png" alt="Instagram" class="hover-switch" data-hover="instac.png" data-default="instanc.png">
    </a>
  </div>
</div>

  </div>
<!-- Container 4: Custom Avatar Border -->
<div class="shop-container" style="background: #171717; padding: 15px; margin-bottom: 20px; border-radius: 16px; box-shadow: 6px 6px 12px #0f0f0f, -6px -6px 12px #1f1f1f;">
  <h3 style="margin-bottom: 8px;">Looking to Personalize Your Avatar with a Custom Border?</h3>
  <p>Reach Out to Get Yours for Just â‚±60</p>
  <div class="shop-contact">
    <span>Contact Us to Avail!</span>
    <div class="shop-socials">
      <a href="https://www.facebook.com/Raaaph.28" target="_blank" aria-label="Visit Facebook">
        <img src="facebooknc.png" alt="Facebook" class="hover-switch" data-hover="Facebookc.png" data-default="facebooknc.png">
      </a>
      <a href="https://instagram.com/rph.wy" target="_blank">
        <img src="instanc.png" alt="Instagram" class="hover-switch" data-hover="instac.png" data-default="instanc.png">
      </a>
    </div>
  </div>
</div>


</div>

</div>
<div id="parsecardsModal" class="glass-modal hidden">
  <div class="modal-content">
    <span class="close-modal" onclick="document.getElementById('parsecardsModal').classList.add('hidden')">âœ–</span>
    <div class="modal-flex">
      <div class="modal-block">
        <img src="wrong.png" alt="Wrong Example" />
        <p contenteditable="true">When uploading a JPG image, ensure that the term and its definition aren't aligned side by side, and leave out the lesson title (youâ€™ll be able to edit it after the system processes your file).

For the best results, avoid using low-quality images.</p>

      </div>
      <div class="modal-block">
        <img src="right.png" alt="Right Example" />
        <p contenteditable="true">Make sure the term is placed above the definition, with some spacing in between for better accuracy. If your notes are handwritten, we recommend using AI tools to convert them into a format that works well with the parser.</p>
      </div>
    </div>
    
  </div>

</div>

<div id="cookieBanner" style="position:fixed; bottom:0; left:0; width:100%; background:#222; color:white; padding:15px; display:none; z-index:10000; text-align:center; font-family:Arial, sans-serif;">
  This website uses cookies to improve your experience and display personalized ads.
  <button onclick="acceptCookies()" style="margin-left:10px; padding:6px 12px; background:#ffb988; color:black; border:none; border-radius:4px; cursor:pointer;">Accept</button>
</div>

<!-- ================================== -->
<!-- â–¼â–¼â–¼ PASTE THE NEW MODAL CODE HERE â–¼â–¼â–¼ -->
<!-- ================================== -->
<div id="createClassBackdrop" class="note-backdrop hidden">
  <div id="createClassModal" class="create-class-modal">
    <!-- Header -->
    <div class="create-class-header">
      <h2 class="create-class-title">Create Class</h2>
      <button id="saveClassBtn" class="neumorphic-button">Create!</button>
    </div>
    <!-- Body -->
    <div class="create-class-body">
      <!-- Left Side: Photo -->
      <div class="create-class-photo-section">
        <div class="photo-placeholder">
          <img src="Group-100.png" id="classImagePreview" alt="Class Photo Preview">
        </div>
        <button id="addClassPhotoBtn" class="neumorphic-button22">Add Photo</button>
        <input type="file" id="classPhotoInput" accept="image/*" style="display: none;">
      </div>
      <!-- Right Side: Inputs -->
      <div class="create-class-form-section">
        <input type="text" id="classNameInput" placeholder="Class Name" class="neumorphic-search" required maxlength="20">
        <input type="text" id="classSectionInput" placeholder="Section" class="neumorphic-search" required>
        <textarea id="classDescriptionInput" placeholder="Description (Optional)" class="neumorphic-search"></textarea>
      </div>
    </div>
  </div>
</div>
<!-- â–²â–²â–² END OF NEW MODAL CODE for all â–²â–²â–² -->
<div id="customAlertModal" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <p id="customAlertMessage"></p>
    <button id="customAlertOkBtn" class="neumorphic-button">OK</button>
  </div>
</div>
<div id="inviteUsersModal" class="note-backdrop hidden">
  <div class="invite-modal-content">
    <div class="invite-modal-header">
      <h2>Invite Members</h2>
      <button id="closeInviteModalBtn" class="note-icon-btn close">&times;</button>
    </div>
    <div class="invite-modal-body">
      <input type="text" id="inviteUserSearch" class="neumorphic-search" placeholder="Search for users by username...">
      <ul id="inviteUserList" class="invite-user-list">
        </ul>
    </div>
  </div>
</div>
<div id="invitationToast" class="invitation-toast hidden">
  <div id="invitationMessage" class="invitation-message"></div>
  <div class="invitation-buttons">
    <button id="acceptInviteBtn" class="neumorphic-button">Accept</button>
    <button id="declineInviteBtn" class="neumorphic-button">Decline</button>
  </div>
</div>
<!-- ===================================== -->
<!-- â–¼â–¼â–¼ NEW CONFIRMATION MODAL HERE â–¼â–¼â–¼ -->
<!-- ===================================== -->
<div id="customConfirmModal" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <p id="confirmMessage"></p>
    <div class="modal-buttons">
      <button id="confirmBtn" class="neumorphic-button">Confirm</button>
      <button id="cancelBtn" class="neumorphic-button">Cancel</button>
    </div>
  </div>
</div>
<!-- â–²â–²â–² END OF NEW CONFIRMATION MODAL â–²â–²â–² -->
 <!-- ===================================== -->
<!-- â–¼â–¼â–¼ NEW TUTORIAL ALERT MODAL HERE â–¼â–¼â–¼ -->
<!-- ===================================== -->
<div id="classTutorialAlert" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <p>Create a Class and invite your friends to Join!</p>
    <button id="classTutorialGotItBtn" class="neumorphic-button">Got it</button>
  </div>
</div>
<!-- â–²â–²â–² END OF NEW TUTORIAL ALERT MODAL â–²â–²â–² -->
 <div id="addToClassBackdrop" class="note-backdrop hidden">
  <div id="addToClassModal" class="create-class-modal" style="width: min(90vw, 420px); height: auto; max-height: 60vh;">
    <div class="create-class-header">
      <h2 id="addToClassTitle" class="create-class-title">Add Note to Class</h2>
      <button id="closeAddToClassBtn" class="note-icon-btn close" title="Close">Ã—</button>
    </div>
    <div id="addToClassBody" style="padding: 16px; overflow-y: auto;">
      <ul id="addToClassList" style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 8px;">
        </ul>
    </div>
  </div>
</div>
<div id="classLogsBackdrop" class="note-backdrop hidden">
  <div id="classLogsModal" class="create-class-modal" style="width: min(90vw, 520px); height: min(80vh, 700px);">
    <div class="create-class-header">
      <h2 class="create-class-title">Class Activity Logs</h2>
      <button id="closeLogsModalBtn" class="note-icon-btn close" title="Close">Ã—</button>
    </div>
    <div id="classLogsBody" class="class-logs-body">
      <ul id="classLogsList" class="class-logs-list">
        </ul>
    </div>
  </div>
</div>
<!-- in lobby.html -->

<!-- ======================================= -->
<!-- â–¼â–¼â–¼ ADD THIS NEW MODAL AT THE END â–¼â–¼â–¼ -->
<!-- ======================================= -->
<div id="announcementBackdrop" class="note-backdrop hidden">
  <div id="announcementModal" class="create-class-modal" style="width: min(90vw, 560px);">
    <div class="create-class-header">
      <h2 class="create-class-title">Make an Announcement</h2>
      <button id="closeAnnouncementModalBtn" class="note-icon-btn close" title="Close">Ã—</button>
    </div>
    <div class="create-class-body" style="flex-direction: column; padding: 16px 24px;">
      <input type="text" id="announcementTitle" class="neumorphic-search" placeholder="Announcement Title" required>
      <textarea id="announcementDescription" class="neumorphic-search" placeholder="What's the announcement?" style="min-height: 150px; resize: vertical;"></textarea>
      <button id="postAnnouncementBtn" class="neumorphic-button" style="align-self: flex-end; margin-top: 10px;">Post Announcement</button>
    </div>
  </div>
</div>
<!-- â–²â–²â–² END OF NEW MODAL â–²â–²â–² -->
 <div id="memberActionsPopover" class="member-actions-popover hidden">
  <button id="promoteMemberBtn" class="member-action-button promote">Promote</button>
  <button id="kickMemberBtn" class="member-action-button kick">Drop</button>
</div>
<div id="usernameModal" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <h3 style="margin-top: 0; margin-bottom: 20px; font-family: 'Satoshi', sans-serif;">Change Username</h3>
    
    <input type="text" id="usernameInput" class="neumorphic-search" placeholder="Enter new username..." maxlength="20" style="width: 90%;">
    
    <div class="modal-buttons" style="margin-top: 20px;">
      <button id="confirmUsernameBtn" class="neumorphic-button">Confirm</button>
      <button id="cancelUsernameBtn" class="neumorphic-button">Cancel</button>
    </div>
  </div>
</div>
    <div id="password-overlay" class="overlay hidden"></div>
    <div id="password-modal" class="modal hidden">
        <button id="close-modal-btn" class="close-btn">&times;</button>
        <h2>Enter Admin Password</h2>
        <form id="password-form">
            <div class="form-group">
                <label for="password-input">6-Digit Password</label>
                <input type="password" id="password-input" maxlength="6" pattern="\d{6}" required>
            </div>
            <button type="submit" class="submit-btn">Proceed</button>
            <p id="password-error" class="error-message"></p>
        </form>
    </div>
<script type="module">
import { doc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
import { db } from "./firebaseinit.js";

const banner = document.getElementById("announcementStrip");
const text = document.getElementById("announcementText");

const docRef = doc(db, "announcements", "current");

onSnapshot(docRef, (docSnap) => {
  if (docSnap.exists()) {
    const data = docSnap.data();
    if (data.active && data.message) {
      text.textContent = data.message;
      banner.classList.remove("hidden");

      // Trigger entrance animation
      banner.style.animation = "none";
      void banner.offsetWidth; // force reflow
      banner.style.animation = "slideFadeIn 0.6s ease forwards";

      // Restart scrolling animation
      text.classList.remove("announcement-text");
      void text.offsetWidth;
      text.classList.add("announcement-text");

      // Auto-hide after animation ends (~12s)
      clearTimeout(window._announceTimeout);
      window._announceTimeout = setTimeout(() => {
        banner.classList.add("hidden");
      }, 12500);
    } else {
      banner.classList.add("hidden");
    }
  }
});
</script>



<script>
  document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("welcomeModal");
    const dismissBtn = document.getElementById("dismissWelcome");

    if (sessionStorage.getItem("justLoggedIn") === "true") {
      modal.classList.remove("hidden");
      sessionStorage.removeItem("justLoggedIn"); // prevent repeat
    }

    dismissBtn?.addEventListener("click", () => {
      modal.classList.add("hidden");
    });
  });
</script>




    <script src="menu.js"></script>
   <script type="module" src="displaylocalsets.js"></script>
    <script src="search.js"></script>
    <script src="icon.js"></script>
    <script type="module" src="music.js"></script>
    

    <script type="module" src="presence.js"></script>
    
    
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
  import {
    getFirestore, collection, query, orderBy, onSnapshot, getDocs
  } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
  import {
    getAuth, onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCndfcWksvEBhzJDiQmJj_zSRI6FSVNUC0",
    authDomain: "flipcards-7adab.firebaseapp.com",
    projectId: "flipcards-7adab",
    storageBucket: "flipcards-7adab.firebasestorage.app",
    messagingSenderId: "836765717736",
    appId: "1:836765717736:web:ff749a40245798307b655d"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth();

  onAuthStateChanged(auth, async (user) => {
    if (!user) return;
    const currentUser = user.email;
    const chatDot = document.getElementById("chatDot");

    const snapshot = await getDocs(collection(db, "approved_emails"));
    const otherUsers = [];
    snapshot.forEach(doc => {
      if (doc.id !== currentUser) otherUsers.push(doc.id);
    });

    const chatListeners = [];

    otherUsers.forEach(otherEmail => {
      const chatId = [currentUser, otherEmail].sort().join("_to_");
      const q = query(collection(db, 'chats', chatId, 'messages'), orderBy('timestamp'));

      const unsub = onSnapshot(q, snap => {
        let unread = false;

        snap.forEach(doc => {
          const data = doc.data();
          if (
            data.sender === otherEmail &&
            !(data.readBy || []).includes(currentUser)
          ) {
            unread = true;
          }
        });

        if (unread) {
          chatDot.style.display = "block";
        } else {
          // check if any other unread messages exist
          let anyUnread = false;
          for (const listener of chatListeners) {
            if (listener.unread) {
              anyUnread = true;
              break;
            }
          }
          if (!anyUnread) {
            chatDot.style.display = "none";
          }
        }

        // track this chatâ€™s unread state
        const listener = chatListeners.find(l => l.email === otherEmail);
        if (listener) {
          listener.unread = unread;
        } else {
          chatListeners.push({ email: otherEmail, unread });
        }
      });
    });
  });
</script>


    <script>
  document.querySelectorAll('.hover-switch').forEach(img => {
    const defaultSrc = img.getAttribute('data-default');
    const hoverSrc = img.getAttribute('data-hover');

    img.addEventListener('mouseover', () => {
      img.src = hoverSrc;
    });

    img.addEventListener('mouseout', () => {
      img.src = defaultSrc;
    });
  });
</script>
<script type="module" src="./AIgeminibtn.js"></script>


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const noteBtn = document.querySelector(".music-icon.notes");
    const notepad = document.getElementById("notepad");
    const notepadHeader = document.getElementById("notepadHeader");
    const notepadText = document.getElementById("notepadText");

    // Load saved note
    notepadText.value = localStorage.getItem("userNote") || "";

    // Real-time saving
    notepadText.addEventListener("input", () => {
      localStorage.setItem("userNote", notepadText.value);
    });

    // Toggle visibility & reset position on open
    noteBtn.addEventListener("click", () => {
      const isHidden = notepad.classList.contains("hidden");
      notepad.classList.toggle("hidden");

      if (isHidden) {
        notepad.style.left = '';
        notepad.style.top = '';
      }
    });

    // Drag functionality
    let offsetX = 0, offsetY = 0, isDragging = false;

    notepadHeader.addEventListener("mousedown", (e) => {
      isDragging = true;
      offsetX = e.clientX - notepad.offsetLeft;
      offsetY = e.clientY - notepad.offsetTop;
      document.body.style.userSelect = "none";
    });

    document.addEventListener("mouseup", () => {
      isDragging = false;
      document.body.style.userSelect = "";
    });

    document.addEventListener("mousemove", (e) => {
      if (!isDragging) return;
      notepad.style.left = `${e.clientX - offsetX}px`;
      notepad.style.top = `${e.clientY - offsetY}px`;
    });
  });
</script>

<script type="module">
  import { checkUserStatus } from './userstatuscheck.js';
  checkUserStatus();
</script>


<script type="module" src="member.js"></script>

<script type="module" src="firebaseinit.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const tooltips = document.querySelectorAll('.tooltip-container');

    tooltips.forEach((el, i) => {
      const tooltip = el;
      tooltip.style.setProperty('--delay', `${i * 0.25}s`);
      tooltip.querySelector('::before'); // ensure rendering
      tooltip.style.animationDelay = `${i * 0.25}s`;
    });
  });
</script>
<script src="flipTimer.js"></script>






<script type="module" src="guestTimer.js"></script>
<script>
  function showGuestModal(message, callback = null) {
    const modal = document.getElementById('guestModal');
    const text = document.getElementById('guestModalMessage');
    text.textContent = message;
    modal.style.display = 'flex';
    modal.dataset.callback = callback ? "true" : "";
  }

  function closeGuestModal() {
    const modal = document.getElementById('guestModal');
    modal.style.display = 'none';
    if (modal.dataset.callback === "true") {
      location.href = "index.html";
    }
  }
</script>
<script type="module" src="profile.js"></script>
<script type="module">
  import './xpTracker.js';

  // Give +45 XP every 10 minutes
  startTimedXP(5, 45);
</script>
<script type="module" src="generalquestion.js"></script>
<script src="loadingOverlay.js"></script>
<script src="tut.js"></script>
<script type="module" src="leaderboard.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const howItWorksLinks = document.querySelectorAll('a.How');
    howItWorksLinks.forEach(link => {
      link.addEventListener("click", (e) => {
        e.preventDefault(); // Prevent jump to #How section
        showTutorial();     // Show tutorial modal
      });
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const text = "Fuel Focus. Build Memory. Own the Knowledge. Repeat.";
    const target = document.getElementById("typingText");

    let i = 0;
    let isDeleting = false;

    function typeLoop() {
      target.textContent = text.substring(0, i);

      if (!isDeleting) {
        if (i < text.length) {
          i++;
        } else {
          isDeleting = true;
          setTimeout(typeLoop, 1200); // wait before deleting
          return;
        }
      } else {
        if (i > 0) {
          i--;
        } else {
          isDeleting = false;
        }
      }

      setTimeout(typeLoop, isDeleting ? 25 : 75); // typing speed
    }

    typeLoop();
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggleBtn = document.getElementById("socialToggleBtn");
    const socialModal = document.getElementById("socialModal");
    const arrow = document.getElementById("socialArrow");

    toggleBtn.addEventListener("click", () => {
  const isOpen = socialModal.classList.toggle("show");
  toggleBtn.classList.toggle("open", isOpen);
  arrow.src = isOpen ? "glassarrowup.png" : "glassarrowdown.png";
});

  });
</script>

<script type="module" src="invitationListener.js"></script>
<script type="module" src="multiplayer.js"></script>
<script type="module" src="miniprofile.js"></script>
<script src="shop.js"></script>
<script src="protect.js"></script>
<script src="cookie.js"></script>
<script type="module" src="./AIppt.js"></script>
<script type="module" src="classfav.js"></script>
<!-- include the separate JS file (after other scripts) -->
<script type="module" src="note.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script type="module" src="userCard.js"></script>
<script type="module" src="invListClass.js"></script>
<script type="module" src="notificationListener.js"></script>
<script src="pass.js"></script>
</body>
</html>