<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlipCards Lobby</title>
     <link rel="stylesheet" href="lobby.css">
     <link rel="icon" type="image/png" sizes="32x32" href="Group-100.png">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4779578721359852"
     crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.1/dist/tesseract.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>


</head>
<body>
    <header class="navhead">
        <div class="container">
            <div class="left-side">
                 <button id="menu-toggle" class="menu-toggle">&#9776;</button>
                <div class="logo"><a href="#" id="admin-link"><img class="group-5" src="Group-100.png" /></a></div>
                <div class="TTitle">FlipCards.</div>
            </div>
            <nav class="side-nav" id="sideNav">
                <div class="side-content">
                    <div class="nav-wrapper">
                        <ul id="navmenu" class="navmenu">
                            <li><a href="#About" class="About">About Us</a></li>
                            <li><a href="#How" class="How">How it Works</a></li>
                            <li><a href="#featuress" class="Features">Features</a></li>
                            <li>
                        <a href="#Folderr" class="Features">
                        Folder
                        </a>
                    </li>
                                               <li class="get-started-container">
  <button class="getstarted js-get-started-btn">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
  <span>Get Started</span>
</button>
  <div class="get-started-dropdown hidden">
    <!-- The two buttons now live inside this modal -->
    <a href="addcard.html" class="lobby-action-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
      <span>Add Card Sets</span>
    </a>
    <a href="addcard_image.html" class="lobby-action-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
      <span>Add Image Sets</span>
    </a>
  </div>
</li>  
 <li>
  <a href="shop.html" class="upgrade-btn"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; vertical-align: middle;">
        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <path d="M16 10a4 4 0 0 1-8 0"></path>
    </svg>Upgrade your Plan</a>
</li                           
                        </ul>
                    </div>
                        <div class="rayt">
                            <div class="rights">FlipCards.</div>
                        </div>
                </div>
            </nav>


                <ul id="navmenu" class="navmenu">
                    <li>
                        <a href="#About" class="About">
                        About Us
                        </a>
                    </li>
                    <li>
                        <a href="#How" class="How">
                        How it Works
                        </a>
                    </li>
                    <li>
                        <a href="#featuress" class="Features">
                        Features
                        </a>
                    </li>
                    <li>
                        <a href="#Folderr" class="Features">
                        Folder
                        </a>
                    </li>            
                    <li class="get-started-container">
  <button class="getstarted js-get-started-btn">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
  <span>Get Started</span>
</button>
  <div class="get-started-dropdown hidden">
    <!-- The two buttons now live inside this modal -->
    <a href="addcard.html" class="lobby-action-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
      <span>Add Card Sets</span>
    </a>
    <a href="addcard_image.html" class="lobby-action-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
      <span>Add Image Sets</span>
    </a>
  </div>
</li>  
                    <!-- Gemini Button -->
<!-- Gemini Button -->
                    <li>
  <a href="shop.html" class="upgrade-btn"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; vertical-align: middle;">
        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <path d="M16 10a4 4 0 0 1-8 0"></path>
    </svg>Upgrade your Plan</a>
</li>

 
                </ul>
        </div>
    </header>
   <!-- Gemini Upload Modal -->
<div class="gemini-modal-backdrop" id="geminiModal">
  <div class="gemini-modal-content">
    <span class="gemini-modal-close" id="closeGeminiModal">&times;</span>
    <h2 class="gemini-modal-title" style="display: flex; align-items: center; gap: 10px;">
  Upload a JPG files to Generate Flashcards
  <img src="beta.png" alt="Beta" style="height: 19px;" />
</h2>


<!-- New Neumorphic Button -->
<button class="neumorphic-button" style="display: block; margin: 0 auto 20px;" onclick="openParsecardsModal()">
  How to properly use ParseCards
</button>

    <!-- New Buttons, File List, and hidden file input -->
<div class="parse-controls">
    <button id="addFilesBtn" class="modern-add-button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
    <span>Add Files</span>
</button>
    <button id="parseCardsBtn" class="modern-parse-button hidden">
    <span>Parse Cards</span>
    <div class="spinner"></div>
</button>
</div>
<div id="fileListContainer" class="file-list-container">
    <!-- Selected files will be listed here -->
</div>
<input type="file" id="geminiFileInput" accept=".jpg,.jpeg" style="display: none;" multiple />
    <span class="gemini-modal-title2">Note: FlipCard's JPG Auto Parser can make mistakes.<span class="gemini-modal-title2">More Accurate on JPG files with Less Complex Design. Please Follow the Rules on How to Use it.</span></span>
    <div class="gemini-flashcards" id="geminiFlashcards"></div>
    <a href="addcard.html" id="gotoAddcardBtn" style="display: none;">
  <button class="neumorphic-button2" style="margin-top: 20px; width: 100%; font-size: 14px;">
    ➕ Go to Addcard Set!
  </button>
</a>

<div id="geminiUsage" style="margin-top: 15px; text-align: center; font-size: 14px; color: #ffffff;background: transparent;">
  Uses left: <span id="geminiUsageCount">3</span> <span>/3</span>

</div>

  </div>
</div> 
    <section class="catchphrase">
      <!-- Social Modal -->
<!-- New Social Sidebar -->
<div class="social-sidebar-container">
    <button id="socialSidebarToggle" class="social-sidebar-toggle">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
    </button>

    <div id="socialSidebar" class="social-sidebar">
        <a href="https://www.facebook.com/Raaaph.28" target="_blank" class="social-sidebar-icon fa-facebook" title="Facebook">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
        </a>
        <a href="https://instagram.com/rph.wy" target="_blank" class="social-sidebar-icon fa-instagram" title="Instagram">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
        </a>
        <a href="https://twitter.com" target="_blank" class="social-sidebar-icon" title="Twitter/X">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
    </svg>
</a>
    </div>
</div>

        <div class="container2">
            <div class="catch-text">
                 <h1>Read. Review. Remember. <span class="ll">Repeat.</span></h1>
                <h6 class="typing-line">
  <span id="typingText"></span>
  
</h6>

            </div>
<div class="cta-row">
  <button id="suggestionBtn" class="upgrade-btn suggestion-btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
         viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
         stroke-linecap="round" stroke-linejoin="round">
      <path d="M15.09 14.51h.01"/><path d="M12.02 18.51h.01"/>
      <path d="M8.95 14.51h.01"/>
      <path d="M12 22a2.8 2.8 0 0 0 2.8-2.8v-2.4a2.8 2.8 0 0 0-2.8-2.8h0a2.8 2.8 0 0 0-2.8 2.8v2.4A2.8 2.8 0 0 0 12 22Z"/>
      <path d="M12 2a4.4 4.4 0 0 0-4.4 4.4v.6a4.4 4.4 0 0 0 4.4 4.4h0a4.4 4.4 0 0 0 4.4-4.4v-.6A4.4 4.4 0 0 0 12 2Z"/>
    </svg>
    <span>Have a Suggestion?</span>
  </button>
<button id="whatsNewBtn" class="upgrade-btn whats-new-btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 14a1 1 0 1 1-1-1 1 1 0 0 1 1 1zm1-5a1 1 0 0 1-2 0V7a1 1 0 0 1 2 0z"/>
    </svg>
    <span>What's New?</span>
  </button>
<a href="flipai.html" id="tryFlipBtn" class="upgrade-btn try-btn" aria-label="Try FlipCardsAI">
    <svg class="ai-sparkle-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
         viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
         stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px; vertical-align:middle;">
      
      <path class="sparkle-main" d="M12 2L9.5 9.5 2 12l7.5 2.5L12 22l2.5-7.5L22 12l-7.5-2.5Z"></path>
      
      <path class="sparkle-small s1" d="M4 4l2 2m0-2l-2 2"></path>
      <path class="sparkle-small s2" d="M18 4l2 2m0-2l-2 2"></path>
      <path class="sparkle-small s3" d="M4 18l2 2m0-2l-2 2"></path>
      <path class="sparkle-small s4" d="M18 18l2 2m0-2l-2 2"></path>
    </svg>
    <span>FlipCards AI</span>
</a>
</div>
<p class="platform-description">
        This platform is founded on the belief that quality education should be accessible to everyone. It provides students with a premium learning experience, powerful study tools, and a vibrant community without the high costs. The service is designed to support learners from all financial backgrounds, ensuring education empowers rather than burdens.
    </p>
        </div>
<div class="musicrow">
    <div class="tooltip-container" data-tooltip="Music">
        <button class="music-icon music" aria-label="Toggle Music">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>
        </button>
        <span class="icon-label">Music</span>
    </div>

    <div class="tooltip-container" data-tooltip="Profile">
        <button class="music-icon profile" aria-label="Profile" onclick="showLoader()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        </button>
        <span class="icon-label">Profile</span>
    </div>

    <div class="tooltip-container" data-tooltip="FlipNotes">
        <button class="music-icon notes" aria-label="Notes">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
        </button>
        <span class="icon-label">FlipNotes</span>
    </div>

    <div class="tooltip-container" data-tooltip="Leaderboards">
        <button id="leaderboardsBtn" class="music-icon" aria-label="Leaderboards">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
          </svg>
        </button>
        <span class="icon-label">Leaderboards</span>
    </div>

    <div class="tooltip-container" data-tooltip="Chat">
        <a href="chat.html" class="chat-link">
            <button class="music-icon chat" aria-label="Chat" id="chatIconButton">
                <span id="chatDot" class="chat-dot" style="display: none;"></span>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
            </button>
            <span class="icon-label">Chat</span>
        </a>
    </div>

    <div class="tooltip-container" data-tooltip="Members">
        <button class="music-icon" id="openMemberList" aria-label="Members">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
        </button>
        <span class="icon-label">Members</span>
    </div>

    <div class="tooltip-container" data-tooltip="FlipTimer">
        <button class="music-icon" id="pomodoroToggleBtn" aria-label="FlipTimer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
        </button>
        <span class="icon-label">FlipTimer</span>
    </div>
</div>
<div id="musicModal" class="music-modal">
  <div id="musicModalHeader" class="music-modal-header">🎧 Community Playlist
     <div class="music-header-buttons">
      <button id="howToUseMusicBtn" class="music-howto-btn" title="How to Use">?</button>
      <span id="closeMusicModalBtn" class="music-modal-close">&times;</span>
    </div>
  </div>
  <div class="music-modal-content">

    <div class="spotify-input-container">
      <p>Paste a Spotify Embed Code here:</p>
      <textarea id="spotifyCodeInput" class="neumorphic-search" placeholder="<iframe src=...></iframe>"></textarea>
      <button id="addSpotifyCodeBtn" class="neumorphic-button">Add to Playlist</button>
      <small id="spotifyErrorText" class="spotify-error"></small>
    </div>

    <div id="spotifyPlayerContainer">
      </div>

  </div>
  <!-- ▼▼▼ ADD THIS NEW FOOTER BLOCK ▼▼▼ -->
  <div class="music-modal-footer">
    <button id="minimizeMusicModalBtn" class="neumorphic-button">Minimize</button>
  </div>
  <!-- ▲▲▲ END OF NEW FOOTER ▲▲▲ -->
</div>
<div id="howToUseMusicModal" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <h3 style="margin-top: 0; font-family: 'Satoshi', sans-serif;">How to Use the Playlist</h3>
    <p id="howToUseMusicMessage" style="font-size: 15px; line-height: 1.6;">
      To enjoy full music playback instead of 30-second previews, please make sure you are logged into your account on the Spotify Web Player in this browser.
      <br/><br/>
      As a user, you can also add your favorite Spotify playlists to this shared collection for everyone to enjoy!
    </p>
    <button id="howToUseMusicOkBtn" class="neumorphic-button">Got it</button>
  </div>
</div>

<!-- Notes Modal -->
<div id="noteBackdrop" class="note-backdrop hidden" aria-hidden="true">
  <div id="noteModal" class="note-modal" role="dialog" aria-modal="true" aria-labelledby="noteTitle">
    <div class="note-topbar">
      <h3 id="noteTitle" class="note-title">FlipNotes<img src="beta.png" alt="Beta" style="height: 19px; margin-left: 6px; margin-top: 5px;" /></h3>

      <div class="note-controls">
        <div class="note-search-wrap">
          <input id="noteSearch" type="text" placeholder="Search notes…" aria-label="Search notes">
          
        </div>

        <button id="noteAddBtn" class="note-icon-btn" title="New note" aria-label="New note">+</button>
        <button id="noteCloseBtn" class="note-icon-btn close" title="Close" aria-label="Close">×</button>
      </div>
    </div>

    <div id="noteList" class="note-list" aria-live="polite"></div>
  </div>
</div>
<!-- Note Preview Modal (opens on top of Notepad modal) -->
<div id="notePreviewBackdrop" class="note-preview-backdrop hidden" aria-hidden="true">
  <div id="notePreviewModal" class="note-preview-modal" role="dialog" aria-modal="true" aria-labelledby="notePreviewTitle">
    <div class="note-preview-topbar">
      <h4 id="notePreviewTitle" class="note-preview-title">(Untitled)</h4>
      <button id="notePreviewCloseBtn" class="note-icon-btn close" title="Close preview" aria-label="Close preview">×</button>
    </div>
    <div class="note-preview-body" id="notePreviewBody"></div>
  </div>
</div>




    </section>
    <section class="folder-section" id="Folderr">
<div class="folder-header" id="folderHeader">
    <h2 class="features-title" style="color: white;">Flashcard Folders</h2>
    <div class="search-container" id="searchContainer">
        <button id="search-toggle-btn" class="search-toggle-btn">
    <svg class="icon-search" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"></circle>
        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
    <svg class="icon-close" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
</button>
        <div class="search-controls">
            <input id="folderSearch" type="text" class="neumorphic-search" placeholder="Search folders...">
        </div>
    </div>
</div>

<div class="folder-controls-container">
    <div class="folder-filter-container">
        <div class="neumorphic-select-wrapper">
            <select id="folderFilter" class="neumorphic-select">
                <option value="your" selected>Your Flashcard Sets</option>
                <option value="public">Public Flashcard Sets</option>
                <option value="liked">Liked FlashCard Sets</option>
            </select>
            <span class="chevron">&#x25BE;</span>
        </div>
    </div>
    
    <div class="folder-sort-container">
        <div class="neumorphic-select-wrapper">
            <select id="folderSort" class="neumorphic-select">
                <option value="newest" selected>Sort by Newest</option>
                <option value="oldest">Sort by Oldest</option>
            </select>
            <span class="chevron">&#x25BE;</span>
        </div>
    </div>
</div>

<div class="lobby-actions-row">
  <a href="addcard.html" class="lobby-action-btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
    <span>Add Card Sets</span>
  </a>
  <a href="addcard_image.html" class="lobby-action-btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
    <span>Add Image Sets</span>
  </a>
</div>
<div class="lobby-actions-row2">
    <button class="quibbl-btn hover-switch" onclick="location.href='Quibbl.html'">
      Quibbl
      
    </button>
    <button class="quibbl-btn" onclick="location.href='Pinpoint.html'">
        Pinpoint
        <img src="new.png" alt="New" class="quibbl-new-icon">
    </button>
    <button id="geminiBtn" class="quibbl-btn"> ParseCards</button>
</div>
  <div class="folder-grid">
    
  </div>
  

</section>
<section id="generalQuestions">
<div class="gq-header">
    <div class="gq-header-text">
      <h2 class="gq-title">General Questions</h2>
      <p class="gq-subtitle">Share a question, build collective answers!</p>
    </div>
    <div class="gq-header-actions">
        <button id="addQuestionBtn" class="gq-add-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
          <span>Ask a Question</span>
        </button>

        <div id="gqSearchContainer" class="gq-search-container">
            <input type="text" id="gqSearchInput" class="gq-search-input" placeholder="Search questions or categories...">
            <button id="gqSearchBtn" class="gq-search-btn">
                <svg class="icon-search" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                <svg class="icon-close" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
    </div>
  </div>

  <div class="gq-controls">
    <button id="refreshQuestions" class="gq-refresh-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M3 21v-5h5"></path></svg>
      <span>Refresh</span>
    </button>
    <span style="font-size: 11px; color: #666; background-color: transparent;">Not seeing your question/answer? Refresh it!</span>
  </div>

  <div id="questionsList" class="questions-list">
    </div>
</section>
<section id="classFavorite" class="class-favorite">
  <div class="class-favorite-header container">
    <div class="class-favorite-header">
  <h2 class="class-favorite-title">Class Favorite</h2>
  <p class="class-favorite-subtitle">Flipcards Most Liked Flashcard Sets Creators</p>
</div>


  </div>
  <div class="class-favorite-body ">
    <!-- TODO: Populate this list dynamically with top creators -->
    <div class="class-favorite-list" aria-live="polite">
      <!-- Example creator card -->
      <div class="class-favorite-card">
        <div class="creator-name"></div>
        <div class="creator-meta"></div>
      </div>
      <div class="class-favorite-card">
        <div class="creator-name"></div>
        <div class="creator-meta"></div>
      </div>
    </div>
  </div>
</section>

<section class="featuress" id="featuress">
  <h2 class="features-title">Our Features</h2>
  <div class="features-grid">
  <div class="feature-box">
    <h3>Flashcard Creation</h3>
    <p>Easily create flashcards with custom questions and answers.</p>
  </div>
  <div class="feature-box">
    <h3>Custom Decks</h3>
    <p>Group your flashcards into decks for organized study sessions.</p>
  </div>
  <div class="feature-box">
    <h3>Many Modes to Review</h3>
    <p>Master any topic using Flashcards, Learn, Match, DefiDrop, and Test modes for flexible, effective studying.</p>
  </div>
  <div class="feature-box">
    <h3>System Update Every Week</h3>
    <p>Enjoy regular updates with bug fixes, UI improvements, and new feature rollouts every week.</p>
  </div>
  <div class="feature-box">
    <h3>Dark Mode</h3>
    <p>Reduce eye strain and study comfortably at night.</p>
  </div>
  <div class="feature-box">
    <h3>Interact with Other Users</h3>
    <p>Browse and study from public card sets shared by others to expand your learning and connect with the community.</p>
  </div>
</div>
<div id="confirmDeleteModal" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content error"> <p id="confirmDeleteMessage">Are you sure?</p>
    <div class="modal-buttons">
      <button id="confirmDeleteBtn" class="neumorphic-button">Delete</button>
      <button id="cancelDeleteBtn" class="neumorphic-button">Cancel</button>
    </div>
  </div>
</div>
<div id="comingSoonModal" class="custom-modal hidden">
  <div class="modal-content">
    <div class="modal-message">✨ Coming Soon!</div>
    <div class="modal-buttons">
      <button id="closeComingSoon" class="neumorphic-button">OK</button>
    </div>
  </div>
</div>

</section>
<section id="About" class="about-section">
  <div class="about-container">
    <h2 class="about-title">About Us</h2>
    <p class="about-description">
      We believe that quality education should be accessible to everyone. That’s why we built this platform—to provide students with a premium learning experience without the high costs found on other websites. Our goal is to support learners who may be struggling financially by offering powerful study tools, regular updates, and a vibrant community—all for free or at a minimal cost. Learning should empower, not burden—and we’re here to make that a reality.
    </p>
  </div>
</section>
<footer class="custom-footer">
  <p class="footer-text">
    Found any Bugs or Do you have Recommendations? Message us!
  </p>

<a href="https://mail.google.com/mail/?view=cm&fs=1&to=taberdoraphael189@gmail.com" target="_blank" class="footer-icon-btn fa-gmail" title="Gmail">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
</a>

<a href="https://www.facebook.com/Raaaph.28" target="_blank" class="footer-icon-btn fa-facebook" title="Facebook">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
</a>

<a href="https://instagram.com/rph.wy" target="_blank" class="footer-icon-btn fa-instagram" title="Instagram">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
</a>
<a href="privacy-policy.html" target="_blank" class="footer-icon-btn fa-privacy" title="Privacy Policy">
   <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
</a>
  <div class="footer-logo">
  <img src="Group-100.png" alt="Site Logo"><h1>FlipCards.</h1>
</div>
</footer>
<!-- Profile Modal -->
<!-- Redesigned Profile Modal -->
<div id="profileModal" class="custom-modal2 hidden" style="top: 80px; left: 20px; right: auto; bottom: auto; justify-content: flex-start; align-items: flex-start;">
 
  <div class="profile-box">
    <div id="profileDragHandle" class="drag-handle">
    <span class="close-profile-modal">✖</span>
  </div>
    <div class="cover-photo-container">
  <img src="" id="coverPreview" alt="Cover" />
  <label for="coverInput" class="edit-cover">📷</label>
  <input type="file" id="coverInput" accept="image/*" hidden />
</div>

<div class="avatar-container">
  <img src="Group-10.png" id="avatarPreview" alt="Avatar" />
  <label for="avatarInput" class="edit-avatar">📷</label>
  <input type="file" id="avatarInput" accept="image/*" hidden />
</div>

    <div class="profile-info">
  <div class="username-row">
    <div id="userName">Your Username</div>
    <span id="userBadgeContainer"></span>
  </div>
  <div id="userEmail">you@email.com</div>
  <button class="edit-username">✏️ Edit Username</button>
  <div class="user-level-display">
  <div id="userLevelText">Level 1</div>
  <div class="xp-bar">
    <div id="xpFill" class="xp-fill"></div>
  </div>
  <div id="xpText">0 / 1200 XP</div>
  <div id="profileBadges" class="badge-container achievement-badges"></div>

</div>

</div>

<div class="modal-buttons profile-actions">
  <button class="neumorphic-button profile-leaderboard-btn" id="openAchievementsFromProfile" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px;">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
    </svg>
    Achievements
  </button>
  <button class="neumorphic-button profile-settings-btn" id="openSettingsBtn" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px;">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/>
    </svg>
    Settings
  </button>
  <a href="index.html" style="width: 80%; display: flex; justify-content: center;">
    <button class="neumorphic-button profile-logout-btn" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px; width: 100%;">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/>
      </svg>
      Logout
    </button>
  </a>
</div>

  </div>
</div>

<div id="welcomeModal" class="custom-modal hidden">
  <div class="modal-content">
    
    <div class="welcome-modal-image">
      <img src="wilkamm.png" alt="Welcome to FlipCards">
    </div>

    <div class="welcome-modal-text">
      <div class="welcome-scroll-content">
        <h2>🎉 Welcome to FlipCards!</h2>
        <p>We're excited to share new updates with you:</p>
        <ul style="text-align: left; font-size: 14px; line-height: 1.6;">
          <li>📅 New features in this Update: OCTOBER 25, 2025</li>
          <br>
          <li>🤝 New Referral System:</li>
          <span class="sub-announcement">➥ You can now invite friends and earn rewards! Share your unique referral code. When your friends sign up, you'll gain points to claim awesome rewards in the shop.</span>
          <br>
          <li>🔐 New Account Process:</li>
          <span class="sub-announcement">➥ We've changed how new users buy account slots! Instead of sending us your password, you can now create your own account on the login page. After purchasing, just request an activation code from an admin.</span>
          <br>
          <li>⏳ Extended Guest Access:</li>
          <span class="sub-announcement">➥ Know someone who wants to try FlipCards? We've increased the time visitors can browse the site from 20 minutes to 5 days!</span>
          <br>
          <li>📋 Paste Image Support:</li>
          <span class="sub-announcement">➥ You can now paste images directly into the Ask AI (Image) tab from your clipboard, in addition to uploading.</span>
          <br>
          <li>🔊 Text-to-Speech Support:</li>
          <span class="sub-announcement">➥ You can now listen to your study sets! We've added a speaker icon to Blitz Mode, Learn Mode, and Test Mode for both terms and definitions.</span>
          <br>
          <li>🔄 Reverse Mode:</li>
          <span class="sub-announcement">➥ Study from a new perspective! You can now flip your cards to study from definition-to-term in Blitz, Learn, and Test modes.</span>
          <br>
          <li>Bug Fixes:</li>
          <span class="sub-announcement">➥ 🐛 We fixed a bug where users couldn't access a card set if it was saved as "Public."</span>
          <span class="sub-announcement">➥ 🐛 We also fixed an issue where a Classroom creator could only invite users who had already set a username.</span>
          <span class="sub-announcement">➥ 🐛 We fixed a bug where DOCX files containing only images (like screenshots) would fail. The AI can now process these files in both the Create Set and Analyze tabs.</span>
          <br>
          <li>👀 Visual Glitch Fixes</li>
          <br>
          <li>🪲 Found any Bugs? Message Us!</li>
        </ul>
      </div>
      <div class="welcome-button-footer">
        <button id="dismissWelcome" class="neumorphic-button">Let's Go!</button>
      </div>
    </div>

  </div>
</div>
<!-- =============================== -->
<!-- ▼▼▼ NEW LEADERBOARD SIDENAV ▼▼▼ -->
<!-- =============================== -->
<div id="leaderboardBackdrop" class="leaderboard-backdrop hidden"></div>
<div id="leaderboardSidenav" class="leaderboard-sidenav">
  <div class="leaderboard-box">
    <div class="leaderboard-header">
  <span class="leaderboard-title" style="display: flex; align-items: center; gap: 10px;">
    <img src="gemm.png" alt="Leaderboards" style="width: 24px; height: 24px;">
    Leaderboards
  </span>

  <div class="leaderboard-header-actions">
    <button id="leaderboardMenuBtn" class="leaderboard-menu-btn" title="Achievements">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
    </button>
    <button id="closeLeaderboardBtn" class="leaderboard-close-btn">&times;</button>
  </div>
  </div>
    <div class="leaderboard-countdown-container">
      <span id="leaderboardCountdown">Loading...</span>
    </div>

    <div class="leaderboard-section">
      <div class="section-title">Top 10 Highest Levels 🎖️</div>
      <ul id="levelLeaderboard" class="leaderboard-list"></ul>
    </div>

    <div class="leaderboard-section">
  <div class="section-title">Top 10 Blitz Records ⚡</div>
  <ul id="blitzLeaderboard" class="leaderboard-list"></ul>
</div>

    <div class="leaderboard-section">
      <div class="section-title">Top 10 Highest Stars Earned in Quibbl <img src="quibblstar.png" alt="Star" class="quibbl-star-icon"></div>
      <ul id="quibblLeaderboard" class="leaderboard-list"></ul>
    </div>
  </div>
</div>
<!-- ▲▲▲ END OF NEW SIDENAV ▲▲▲ -->
<div id="achievementsModal" class="custom-modal hidden">
  <div class="achievements-box">
    <div class="achievements-header">
      <span class="achievements-title" id="achievementsTitle">🏅 Achievements</span>

      <span class="achievements-close" onclick="document.getElementById('achievementsModal').classList.add('hidden')">✖</span>
    </div>
    
    <!-- Fade-in grid added here -->
     <div id="flashcardStat" style="color: #ccc; font-size: 14px; margin-bottom: 20px;"></div>
    <div class="badge-grid fade-content">
      <div class="badge-card" id="flashcardBadge">
  <div class="badge-icon">📘</div>
  <div class="badge-label" id="flashcardCountLabel">Loading...</div>
</div>

      <div class="badge-card">
  <div class="badge-icon">⚡</div>
  <div class="badge-label" id="blitzCountLabel">Loading...</div>
</div>

<div class="badge-card" id="quibblWinsBadge">
  <div class="badge-icon2">Quibbl Stars Earned:</div>
  <div class="badge-label" id="quibblWinsLabel">
    <img src="quibblstar.png" alt="star" class="star-icon" style="display:none;">
  </div>
</div>




      <div class="badge-card locked">
        <div class="badge-icon">🔒</div>
        <div class="badge-label">Coming Soon!</div>
      </div>
    </div>
  </div>
</div>



<!-- Member List Sidebar -->
<div id="memberSidebar" class="member-sidebar">

  <div class="member-header">🧑‍💻 Registered Users <button id="closeMemberList" class="close-member-btn">&times;</button></div>
  <ul id="memberList" class="member-list">
    <!-- Members will be populated here -->
  </ul>
</div>
<!--FlipTimer Modal-->
<div id="flipTimerModal" class="flip-timer-modal hidden">
  <div class="flip-timer-header">
    <span class="flip-timer-title">🕒 FlipTimer</span>
    <span class="flip-timer-close" onclick="closeFlipTimer()">&times;</span>
  </div>
  <div class="flip-timer-body">
    <label for="studyMinutes">Study Minutes:</label>
    <input type="number" id="studyMinutes" min="1" max="180" placeholder="Enter minutes...">

    <h2 id="flipTimerLabel">Ready to Focus?</h2>
    <h1 id="flipTimerClock">00:00</h1>

    <div class="flip-timer-buttons">
      <button onclick="startFlipTimer()">Start</button>
      <button onclick="resetFlipTimer()">Reset</button>
      <button onclick="skipBreak()">Skip</button>
      <button onclick="pauseFlipTimer()" id="pauseButton">⏸️ Pause</button>

    </div>

    <p>Breaks Taken: <span id="breakCounter">0</span></p>
    <div style="text-align: center; margin-top: 10px;">
  <button id="collapseBtn" onclick="collapseFlipTimer()" class="neumorphic-button" style="padding: 4px 12px; font-size: 12px;">▲ Collapse</button>
</div>

<!-- Minimized view -->


  </div>
</div>
<div id="flipTimerConfirm" class="flip-timer-confirm hidden">
  <div class="flip-timer-confirm-box">
    <p>Want to continue?</p>
    <div>
      <button onclick="confirmFlipTimerContinue(true)">Yes</button>
      <button onclick="confirmFlipTimerContinue(false)">No</button>
    </div>
  </div>
</div>
<div id="flipTimerMinimized" class="hidden" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  padding: 10px 16px;
  border-radius: 16px;
  font-family: 'QilkaBold';
  font-size: 16px;
  z-index: 3000;
  gap: 10px;
  align-items: center;
  box-shadow: 6px 6px 12px rgba(0,0,0,0.3), -6px -6px 12px rgba(255,255,255,0.05);
  cursor: pointer;
  border: 1px solid white;
  backdrop-filter: blur(8px);
  display: flex;
">
<span id="minBreakCounter">0</span>
  <span id="flipTimerMinClock">00:00</span>
   <button onclick="expandFlipTimer()" class="neumorphic-button" style="font-size: 12px; padding: 4px 10px;">▲ Expand</button>
</div>


<!-- 🔔 Live Announcement Modal -->
<div id="announcementStrip" class="announcement-strip hidden">
  <div id="announcementText" class="announcement-text"></div>
</div>
<div id="guestModal" class="modal-overlay">
  <div class="modal-box guest-modal-content">
    <div class="modal-icon-wrapper">
      <svg class="checkmark-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
        <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
        <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
      </svg>
    </div>
    <p id="guestModalMessage"></p>
    <button onclick="closeGuestModal()">OK</button>
  </div>
</div>
<!-- Hidden form for adding question -->
<div id="gqModalBackdrop" class="gq-modal-backdrop hidden">
  <div id="gqModal" class="gq-modal">
    <div class="gq-modal-header">
      <h3 class="gq-modal-title">Ask a General Question</h3>
      <button id="closeGqModalBtn" class="gq-modal-close-btn">&times;</button>
    </div>
    <div class="gq-modal-body">
      <input type="text" id="gqCategoryInput" class="gq-modal-input" placeholder="Enter category (e.g., Science, History)" required>
      <textarea id="gqQuestionInput" class="gq-modal-input" placeholder="Type your question here..." required></textarea>
    </div>
    <div class="gq-modal-footer">
      <button id="submitGqBtn" class="gq-modal-btn submit">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 2 11 13 2 9l9 2 2 9 4-11z"></path></svg>
        <span>Submit</span>
      </button>
    </div>
  </div>
</div>
<div id="tutorialModal" class="tutorial-backdrop hidden">
  <div class="tutorial-modal">
    <div class="tutorial-header">
      <div id="tutorialProgressBar" class="tutorial-progress-bar"></div>
      <button class="tutorial-close" onclick="closeTutorial()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
    </div>

    <div id="tutorialSlideContent" class="tutorial-slide">
      </div>

    <div class="tutorial-footer">
      <button id="tutorialPrevBtn" class="tutorial-nav-btn" onclick="changeTutorialSlide(-1)">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
        <span>Prev</span>
      </button>
      <button id="tutorialNextBtn" class="tutorial-nav-btn" onclick="changeTutorialSlide(1)">
        <span>Next</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
      </button>
    </div>
  </div>
</div>

<div id="parsecardsModal" class="glass-modal hidden">
  <div class="modal-content">
    <span class="close-modal" onclick="document.getElementById('parsecardsModal').classList.add('hidden')">✖</span>
    <div class="modal-flex">
      <div class="modal-block">
        <img src="wrong.png" alt="Wrong Example" />
        <p contenteditable="true">When uploading a JPG image, ensure that the term and its definition aren't aligned side by side, and leave out the lesson title (you’ll be able to edit it after the system processes your file).

For the best results, avoid using low-quality images.</p>

      </div>
      <div class="modal-block">
        <img src="right.png" alt="Right Example" />
        <p contenteditable="true">Make sure the term is placed above the definition, with some spacing in between for better accuracy. If your notes are handwritten, we recommend using AI tools to convert them into a format that works well with the parser.</p>
      </div>
    </div>
    
  </div>

</div>

<div id="cookieBanner">
  This website uses cookies to improve your experience and display personalized ads.
  <button onclick="acceptCookies()" style="margin-left:10px; padding:6px 12px; background:#ffb988; color:black; border:none; border-radius:4px; cursor:pointer;">Accept</button>
</div>

<!-- ================================== -->
<!-- ▼▼▼ PASTE THE NEW MODAL CODE HERE ▼▼▼ -->
<!-- ================================== -->
<div id="createClassBackdrop" class="note-backdrop hidden">
  <div id="createClassModal" class="create-class-modal">
    <!-- Header -->
    <div class="create-class-header">
      <h2 class="create-class-title">Create Class</h2>
      <button id="saveClassBtn" class="neumorphic-button">Create!</button>
    </div>
    <!-- Body -->
    <div class="create-class-body">
      <!-- Left Side: Photo -->
      <div class="create-class-photo-section">
        <div class="photo-placeholder">
          <img src="Group-100.png" id="classImagePreview" alt="Class Photo Preview">
        </div>
        <button id="addClassPhotoBtn" class="neumorphic-button22">Add Photo</button>
        <input type="file" id="classPhotoInput" accept="image/*" style="display: none;">
      </div>
      <!-- Right Side: Inputs -->
      <div class="create-class-form-section">
        <input type="text" id="classNameInput" placeholder="Class Name" class="neumorphic-search" required maxlength="20">
        <input type="text" id="classSectionInput" placeholder="Section" class="neumorphic-search" required>
        <textarea id="classDescriptionInput" placeholder="Description (Optional)" class="neumorphic-search"></textarea>
      </div>
    </div>
  </div>
</div>
<!-- ▲▲▲ END OF NEW MODAL CODE for all ▲▲▲ -->
<div id="customAlertModal" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <p id="customAlertMessage"></p>
    <button id="customAlertOkBtn" class="neumorphic-button">OK</button>
  </div>
</div>
<div id="gqAlertModal" class="custom-alert-backdrop hidden">
  <div id="gqAlertContent" class="custom-alert-content">
    <p id="gqAlertMessage"></p>
    <button id="gqAlertOkBtn" class="neumorphic-button">OK</button>
  </div>
</div>
<div id="inviteUsersModal" class="note-backdrop hidden">
  <div class="invite-modal-content">
    <div class="invite-modal-header">
      <h2>Invite Members</h2>
      <button id="closeInviteModalBtn" class="note-icon-btn close">&times;</button>
    </div>
    <div class="invite-modal-body">
      <input type="text" id="inviteUserSearch" class="neumorphic-search" placeholder="Search for users by username...">
      <ul id="inviteUserList" class="invite-user-list">
        </ul>
    </div>
  </div>
</div>
<div id="invitationToast" class="invitation-toast hidden">
  <div id="invitationMessage" class="invitation-message"></div>
  <div class="invitation-buttons">
    <button id="acceptInviteBtn" class="neumorphic-button">Accept</button>
    <button id="declineInviteBtn" class="neumorphic-button">Decline</button>
  </div>
</div>
<!-- ===================================== -->
<!-- ▼▼▼ NEW CONFIRMATION MODAL HERE ▼▼▼ -->
<!-- ===================================== -->
<div id="customConfirmModal" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <p id="confirmMessage"></p>
    <div class="modal-buttons">
      <button id="confirmBtn" class="neumorphic-button">Confirm</button>
      <button id="cancelBtn" class="neumorphic-button">Cancel</button>
    </div>
  </div>
</div>
<!-- ▲▲▲ END OF NEW CONFIRMATION MODAL ▲▲▲ -->
 <!-- ===================================== -->
<!-- ▼▼▼ NEW TUTORIAL ALERT MODAL HERE ▼▼▼ -->
<!-- ===================================== -->
<div id="classTutorialAlert" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <p>Create a Class and invite your friends to Join!</p>
    <button id="classTutorialGotItBtn" class="neumorphic-button">Got it</button>
  </div>
</div>
<!-- ▲▲▲ END OF NEW TUTORIAL ALERT MODAL ▲▲▲ -->
 <div id="addToClassBackdrop" class="note-backdrop hidden">
  <div id="addToClassModal" class="create-class-modal" style="width: min(90vw, 420px); height: auto; max-height: 60vh;">
    <div class="create-class-header">
      <h2 id="addToClassTitle" class="create-class-title">Add Note to Class</h2>
      <button id="closeAddToClassBtn" class="note-icon-btn close" title="Close">×</button>
    </div>
    <div id="addToClassBody" style="padding: 16px; overflow-y: auto;">
      <ul id="addToClassList" style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 8px;">
        </ul>
    </div>
  </div>
</div>
<div id="classLogsBackdrop" class="note-backdrop hidden">
  <div id="classLogsModal" class="create-class-modal" style="width: min(90vw, 520px); height: min(80vh, 700px);">
    <div class="create-class-header">
      <h2 class="create-class-title">Class Activity Logs</h2>
      <button id="closeLogsModalBtn" class="note-icon-btn close" title="Close">×</button>
    </div>
    <div id="classLogsBody" class="class-logs-body">
      <ul id="classLogsList" class="class-logs-list">
        </ul>
    </div>
  </div>
</div>
<!-- in lobby.html -->

<!-- ======================================= -->
<!-- ▼▼▼ ADD THIS NEW MODAL AT THE END ▼▼▼ -->
<!-- ======================================= -->
<div id="announcementBackdrop" class="note-backdrop hidden">
  <div id="announcementModal" class="create-class-modal" style="width: min(90vw, 560px);">
    <div class="create-class-header">
      <h2 class="create-class-title">Make an Announcement</h2>
      <button id="closeAnnouncementModalBtn" class="note-icon-btn close" title="Close">×</button>
    </div>
    <div class="create-class-body" style="flex-direction: column; padding: 16px 24px;">
      <input type="text" id="announcementTitle" class="neumorphic-search" placeholder="Announcement Title" required>
      <textarea id="announcementDescription" class="neumorphic-search" placeholder="What's the announcement?" style="min-height: 150px; resize: vertical;"></textarea>
      <button id="postAnnouncementBtn" class="neumorphic-button" style="align-self: flex-end; margin-top: 10px;">Post Announcement</button>
    </div>
  </div>
</div>
<!-- ▲▲▲ END OF NEW MODAL ▲▲▲ -->
 <div id="memberActionsPopover" class="member-actions-popover hidden">
  <button id="promoteMemberBtn" class="member-action-button promote">Promote</button>
  <button id="kickMemberBtn" class="member-action-button kick">Drop</button>
</div>
<div id="usernameModal" class="custom-alert-backdrop hidden">
  <div class="custom-alert-content">
    <h3 style="margin-top: 0; margin-bottom: 20px; font-family: 'Satoshi', sans-serif;">Change Username</h3>
    
    <input type="text" id="usernameInput" class="neumorphic-search" placeholder="Enter new username..." maxlength="20" style="width: 90%;">
    
    <div class="modal-buttons" style="margin-top: 20px;">
      <button id="confirmUsernameBtn" class="neumorphic-button">Confirm</button>
      <button id="cancelUsernameBtn" class="neumorphic-button">Cancel</button>
    </div>
  </div>
</div>
    <div id="password-overlay" class="overlay hidden"></div>
    <div id="password-modal" class="modal hidden">
        <button id="close-modal-btn" class="close-btn">&times;</button>
        <h2>Enter Admin Password</h2>
        <form id="password-form">
            <div class="form-group">
                <label for="password-input">6-Digit Password</label>
                <input type="password" id="password-input" maxlength="6" pattern="\d{6}" required>
            </div>
            <button type="submit" class="submit-btn">Proceed</button>
            <p id="password-error" class="error-message"></p>
        </form>
    </div>
    <div id="suggestionModal" class="custom-modal hidden">
  <div class="modal-content2" style="background: #171717; border: 1px solid white; color: white;">
    <span id="closeSuggestionModal" class="close-profile-modal" style="top: 15px; right: 20px;">&times;</span>
    <h3 style="margin-bottom: 20px; font-family: 'Satoshi', sans-serif;">Share Your Suggestion!</h3>
    <p style="font-size: 14px; color: #ccc; margin-top: -15px; margin-bottom: 20px; font-family: 'Satoshi', sans-serif;">
      Help us improve FlipCards. What new features or changes would you like to see?
    </p>
    <input type="text" id="suggestionTitleInput" class="neumorphic-search" placeholder="Suggestion Title..." maxlength="50" style="margin-bottom: 10px;">
<textarea id="suggestionInput" class="neumorphic-search" placeholder="Type your suggestion here..."></textarea>
    <div class="modal-buttons" style="margin-top: 20px;">
      <button id="submitSuggestionBtn" class="neumorphic-button">Submit</button>
    </div>
  </div>
</div>
<div id="suggestionNotificationToast" class="invitation-toast hidden">
  <div id="suggestionNotificationMessage" class="invitation-message"></div>
  <div class="invitation-buttons">
    <button id="dismissSuggestionNotificationBtn" class="neumorphic-button">Dismiss</button>
  </div>
</div>
<div id="chatWidget" class="chat-widget">
        <button id="chatToggleBtn" class="chat-toggle-btn" data-tooltip="Ask FlipCards Lobby Assistant">
            <svg id="chatIcon" class="ai-sparkle-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <path class="sparkle-main" d="M12 2L9.5 9.5 2 12l7.5 2.5L12 22l2.5-7.5L22 12l-7.5-2.5Z"></path>
                <path class="sparkle-small s1" d="M4 4l2 2m0-2l-2 2"></path>
                <path class="sparkle-small s2" d="M18 4l2 2m0-2l-2 2"></path>
                <path class="sparkle-small s3" d="M4 18l2 2m0-2l-2 2"></path>
                <path class="sparkle-small s4" d="M18 18l2 2m0-2l-2 2"></path>
            </svg>
            <i class="fa-solid fa-xmark hidden"></i>
        </button>
        <div id="chatContainer" class="chat-container hidden">
            <div class="chat-header">
                <h3>FlipCards Lobby Assistant</h3>
            </div>
            <div id="chatMessages" class="chat-messages">
                <div class="chat-message ai-message" id="initialAiMessage">
                    <p>Hi there! How can I help you with the features in the lobby?</p>
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chatInput" placeholder="Ask about the lobby..." autocomplete="off">
                <button id="chatSendBtn"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>
    </div>
    <div id="profile-notification" class="profile-notification-container hidden">
        <span id="notification-message"></span>
        <span id="dismiss-notification" class="dismiss-btn">&times;</span>
    </div>
<!-- Feature Showcase Modal -->
<div id="featureShowcaseModal" class="custom-modal hidden">
  <div class="showcase-modal-content">
    
    <div class="showcase-scroll-container">
      
      <div class="showcase-video-main">
        <video id="mainShowcaseVideo" src="ReferralCode.mp4" loop playsinline></video>
        <button id="toggleMuteBtn" class="video-mute-btn" aria-label="Toggle Mute">
          <svg id="unmutedIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
          <svg id="mutedIcon" class="hidden" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
        </button>
        <div id="videoProgressBarContainer" class="video-progress-bar-container">
            <div id="videoProgressBarFill" class="video-progress-bar-fill"></div>
        </div>
      </div>
      <div class="section-divider-container">
        <hr class="section-divider">
        <h2 class="section-divider-title">✨ Referral Code System ✨</h2>
      </div>
      <div class="showcase-section landscape-layout">
        <div class="showcase-video-container landscape-video">
           <video src="refcode1.mp4" autoplay muted loop playsinline></video>
        </div>
        <div class="showcase-description landscape-description">
          <h3>Here's how you can set your unique Referral Code:</h3>
          <p>To set your unique Referral Code, first click your profile icon 👤 to open your profile, then click the Settings button ⚙️ inside. Navigate to the Referral Code tab, type your desired unique code into the input field, and click "Set Code". ✨ Please choose carefully, as you cannot change this code once it's set!</p>
        </div>
      </div>

      <div class="showcase-section landscape-layout">
        <div class="showcase-video-container landscape-video">
           <video src="refcode2.mp4" autoplay muted loop playsinline></video>
        </div>
        <div class="showcase-description landscape-description">
          <h3>How to Claim Your Referral Rewards</h3>
          <p>You can find the available Referral Rewards by clicking your profile icon 👤, then opening Settings ⚙️, and finally clicking the "See Rewards" button 🎁. Inside the Rewards modal, you'll see the list of rewards you can earn and the specific rules for claiming them. To claim a reward, you'll need to follow the instructions provided in the modal, which involves messaging the Admin on Facebook using the button shown there.</p>
        </div>
      </div>

      <div class="showcase-section landscape-layout">
        <div class="showcase-video-container landscape-video">
           <video src="refcode3.mp4" autoplay muted loop playsinline></video>
        </div>
        <div class="showcase-description landscape-description">
          <h3>Entering a Referral Code (Guest Login)</h3>
          <p>To enter a referral code when logging in as a Guest, simply choose the "Guest Login" option. During the guest login process, you'll see a field where you can enter the unique Referral Code given to you by the FlipCards user who referred you. Type the code into the designated box and proceed with the login. This will credit the user who shared their code with you! 👍</p>
        </div>
      </div>
      <div class="showcase-section landscape-layout">
        <div class="showcase-video-container landscape-video">
           <video src="refcode4.mp4" autoplay muted loop playsinline></video>
        </div>
        <div class="showcase-description landscape-description">
          <h3>Entering a Referral Code (Account Creation/Purchase)</h3>
          <p>When you create a new FlipCards account or purchase an account slot, you'll have the opportunity to enter a referral code. Look for the designated "Referral Code" field during the sign-up or purchase process. Simply type in the unique code provided by the user who referred you into this box before completing the registration or payment. Doing so ensures the referring user gets credited for bringing you to FlipCards! 🎉</p>
        </div>
      </div>
      <div class="section-divider-container">
        <hr class="section-divider">
        <h2 class="section-divider-title">✨ FlipCards Assistant Update ✨</h2>
      </div>
      <div class="showcase-section">
        <div class="showcase-video-container">
           <video src="flipcardsailobby.mp4" autoplay muted loop playsinline></video>
        </div>
        <div class="showcase-description">
          <h3>FlipCards AI Assistant</h3>
          <p>The FlipCards AI page includes a chat widget feature, identified as chatWidget, which is fixed in the bottom-right corner of the screen. Users can open the chat interface by clicking the toggle button (chatToggleBtn), which displays an AI sparkle icon and has a tooltip that reads "Ask FlipCards Assistant".</p>
        </div>
      </div>
      
      <div class="showcase-section reverse">
        <div class="showcase-video-container">
           <video src="flipaipage.mp4" autoplay muted loop playsinline></video>
        </div>
        <div class="showcase-description">
          <h3>Interaction</h3>
          <p>Users can type questions into the chatInput text field, which has a placeholder of "Ask about a feature...". Messages are sent by clicking the chatSendBtn or pressing the Enter key.</p>
          <p>To use it, just click the chat button that has the sparkle icon. When you hover over it, you'll see a tooltip that says "Ask FlipCards Assistant".</p>
        </div>
      </div>
      <p class="assistant-suggestion-note">
        Help improve the Assistant! Message us with your suggestions.
      </p>
      <div class="showcase-close-footer">
        <button id="closeShowcaseModal" class="modern-close-btn">
          <span>Close</span>
        </button>
      </div>
      
    </div> <div id="scrollIndicator" class="scroll-indicator">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>
      <span>Scroll down to see more</span>
    </div>
    
  </div> 
</div>
  <div id="settingsModal" class="custom-alert-backdrop hidden">
  <div class="settings-modal-content">
    <div class="settings-header">
      <h3>Settings</h3>
      <button id="closeSettingsModalBtn" class="note-icon-btn close" title="Close">×</button>
    </div>
    <div class="settings-body">
      <div class="settings-sidenav">
        <button class="settings-nav-btn active">Referral Code</button>
        </div>
      <div class="settings-content">
        <div class="referral-tab-content">
  <h4>Set Your Referral Code</h4>
  <p>Enter a unique referral code.</p> <div class="referral-input-group">
    <input type="text" id="referralCodeInput" class="neumorphic-search" placeholder="Enter unique code...">
    <button id="setReferralCodeBtn" class="neumorphic-button">Set Code</button>
  </div>
  <small class="referral-warning">Once you set this code, <strong>it cannot be changed.</strong></small>
  <div id="userReferralCodeDisplay" class="user-code-display hidden">
  Your Code: <span id="userReferralCodeSpan" class="user-code"></span>
  <span id="referralCounterSpan" class="user-code-counter">Points: 0</span>
</div>
<button id="showRewardsBtn" class="neumorphic-button" style="margin-top: 20px; width: 100%; display: inline-flex; align-items: center; justify-content: center; gap: 8px;">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="20 12 20 22 4 22 4 12"></polyline>
    <rect x="2" y="7" width="20" height="5"></rect>
    <line x1="12" y1="22" x2="12" y2="7"></line>
    <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path>
    <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>
  </svg>
  See Rewards
</button>
</div>
        </div>
    </div>
  </div>
</div>
<div id="rewardsModal" class="custom-alert-backdrop hidden">
  <div class="rewards-modal-content">
    <div class="rewards-header">
      <h3>🎁 Referral Rewards</h3>
      <button id="closeRewardsModalBtn" class="note-icon-btn close" title="Close">×</button>
    </div>
    <div class="rewards-body">
      <h4>Available Rewards:</h4>
      <ul class="rewards-list">
        <li><strong>20 Points:</strong> 1 Month Verified Subscription</li>
        <li><strong>30 Points:</strong> 2 Months Verified Subscription</li>
        <li><strong>50 Points:</strong> 1 Month Plus Subscription</li>
      </ul>

      <h4>Claiming Rules:</h4>
      <ul class="rewards-rules">
        <li>Claiming a reward will deduct the points from your total.</li>
        <li>'Verified Subscription' months will stack if you already have one.</li>
        <li>Upgrading from 'Verified' to 'Plus' will start the 'Plus' subscription immediately; any remaining 'Verified' time is not carried over.</li>
      </ul>

      <p class="claim-instruction">To claim your reward, please message the Admin on Facebook:</p>
      <a href="https://www.facebook.com/Raaaph.28" target="_blank" class="neumorphic-button facebook-claim-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
          <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
        </svg>
        Claim via Facebook
      </a>
    </div>
  </div>
</div>
<script type="module">
import { doc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
import { db } from "./firebaseinit.js";

const banner = document.getElementById("announcementStrip");
const text = document.getElementById("announcementText");

const docRef = doc(db, "announcements", "current");

onSnapshot(docRef, (docSnap) => {
  if (docSnap.exists()) {
    const data = docSnap.data();
    if (data.active && data.message) {
      text.textContent = data.message;
      banner.classList.remove("hidden");

      // Trigger entrance animation
      banner.style.animation = "none";
      void banner.offsetWidth; // force reflow
      banner.style.animation = "slideFadeIn 0.6s ease forwards";

      // Restart scrolling animation
      text.classList.remove("announcement-text");
      void text.offsetWidth;
      text.classList.add("announcement-text");

      // Auto-hide after animation ends (~12s)
      clearTimeout(window._announceTimeout);
      window._announceTimeout = setTimeout(() => {
        banner.classList.add("hidden");
      }, 12500);
    } else {
      banner.classList.add("hidden");
    }
  }
});
</script>



<script>
  document.addEventListener("DOMContentLoaded", () => {
    // DEBUG: Initial log
    console.log("Script loaded (Overflow+Important). Initializing elements.");

    const welcomeModal = document.getElementById("welcomeModal");
    const dismissWelcomeBtn = document.getElementById("dismissWelcome");
    const htmlEl = document.documentElement;
    const bodyEl = document.body;

    // DEBUG: Log elements found
    console.log("htmlEl:", htmlEl);
    console.log("bodyEl:", bodyEl);
    console.log("welcomeModal found?", !!welcomeModal); // Check if modal exists

    // ... (rest of the element variables: showcaseModal, closeShowcaseBtn, etc.)
    const showcaseModal = document.getElementById("featureShowcaseModal");
    const closeShowcaseBtn = document.getElementById("closeShowcaseModal");
    const scrollContainer = document.querySelector(".showcase-scroll-container");
    const mainVideo = document.getElementById("mainShowcaseVideo");
    const toggleMuteBtn = document.getElementById("toggleMuteBtn");
    const unmutedIcon = document.getElementById("unmutedIcon");
    const mutedIcon = document.getElementById("mutedIcon");
    const scrollIndicator = document.getElementById("scrollIndicator");
    const progressBarFill = document.getElementById("videoProgressBarFill");
const whatsNewBtn = document.getElementById("whatsNewBtn");

    // Function to lock background scroll
    function lockScroll() {
      console.log("--- LOCKING SCROLL (Overflow Method + !important) ---");
      htmlEl.style.setProperty('overflow', 'hidden', 'important');
      bodyEl.style.setProperty('overflow', 'hidden', 'important');
      console.log("Set html.style.overflow:", htmlEl.style.overflow);
      console.log("Set body.style.overflow:", bodyEl.style.overflow);
    }

    // Function to unlock background scroll
    function unlockScroll() {
      console.log("--- UNLOCKING SCROLL (Overflow Method + !important) ---");
      htmlEl.style.removeProperty('overflow');
      bodyEl.style.removeProperty('overflow');
      console.log("Cleared html.style.overflow");
      console.log("Cleared body.style.overflow");
    }

    // --- Start Debugging the initial modal show ---
    console.log("DEBUG: Checking condition to show welcome modal..."); // Log BEFORE the check

    // Make sure this is still set to true for testing:
    const shouldShowWelcome = sessionStorage.getItem("justLoggedIn") === "true"; // Original line
    // const shouldShowWelcome = sessionStorage.getItem("justLoggedIn") === "true"; // Original line

    console.log("DEBUG: shouldShowWelcome is:", shouldShowWelcome); // Log the condition result

    if (shouldShowWelcome) {
      console.log("DEBUG: Condition MET. Attempting to show welcome modal..."); // Log INSIDE the block

      if (welcomeModal) {
        console.log("DEBUG: welcomeModal exists. Removing 'hidden' class..."); // Log before class change
        welcomeModal.classList.remove("hidden");
        console.log("DEBUG: 'hidden' class removed. Calling lockScroll()..."); // Log before lockScroll
        lockScroll();
        console.log("DEBUG: lockScroll() called."); // Log after lockScro
        sessionStorage.removeItem("justLoggedIn"); // Keep commented out for testing
      } else {
        console.error("DEBUG: welcomeModal element NOT FOUND! Cannot show modal or lock scroll."); // Log if modal is missing
      }
    } else {
      console.log("DEBUG: Condition NOT MET. Welcome modal will not be shown initially."); // Log if condition is false
    }
    // --- End Debugging ---


    // When "Let's Go!" is clicked...
    dismissWelcomeBtn?.addEventListener("click", () => {
      console.log("'Let's Go!' clicked. Transitioning to Showcase Modal.");
      if (welcomeModal) welcomeModal.classList.add("hidden");
      showcaseModal.classList.remove("hidden");
      lockScroll(); // Ensure scroll remains locked
if (progressBarFill) progressBarFill.style.width = '0%';
      if (mainVideo) {
         mainVideo.muted = false;
         unmutedIcon.classList.remove("hidden");
         mutedIcon.classList.add("hidden");
         mainVideo.play().catch(error => { /* ... error handling ... */ });
      }
    });
    // --- UPDATED: Event Listener for "What's New?" Button ---
whatsNewBtn?.addEventListener("click", () => {
    // Updated log message
    console.log("'What's New?' clicked. Opening Welcome Modal ONLY.");

    // 1. Show ONLY the welcome modal
    if (welcomeModal) {
        welcomeModal.classList.remove("hidden");
        // 2. Lock background scroll
        lockScroll();
    } else {
        console.error("Welcome modal not found!"); // Add an error check
    }

    // --- REMOVED ---
    // (No need to show showcaseModal or interact with its video/scroll here)

});
// --- END of Updated Listener ---
mainVideo?.addEventListener('timeupdate', () => {
    if (mainVideo.duration && progressBarFill) {
        const progressPercent = (mainVideo.currentTime / mainVideo.duration) * 100;
        progressBarFill.style.width = `${progressPercent}%`;
    } else if (progressBarFill) {
        progressBarFill.style.width = '0%'; // Reset if duration isn't available
    }
});
    // ... (rest of the script: Mute button, Scroll indicator, Close button listeners)
     toggleMuteBtn?.addEventListener("click", () => { /* ... mute logic ... */ });
     scrollContainer?.addEventListener("scroll", () => { /* ... scroll indicator logic ... */ });
     closeShowcaseBtn?.addEventListener("click", () => { /* ... close logic including unlockScroll() ... */ });
     // Mute button listener
    toggleMuteBtn?.addEventListener("click", () => {
      if (mainVideo) {
        mainVideo.muted = !mainVideo.muted;
        unmutedIcon.classList.toggle("hidden", mainVideo.muted);
        mutedIcon.classList.toggle("hidden", !mainVideo.muted);
      }
    });

    // Scroll indicator listener
    scrollContainer?.addEventListener("scroll", () => {
      scrollIndicator.classList.toggle("hidden", scrollContainer.scrollTop > 40);
    });

    // Showcase modal close button listener
// Showcase modal close button listener
    closeShowcaseBtn?.addEventListener("click", () => {
      // DEBUG: Log close button click
      console.log("Showcase 'Close' button clicked. Starting close animation.");

      const modalContent = showcaseModal.querySelector('.showcase-modal-content');

      // --- NEW ANIMATION LOGIC ---
      if (modalContent) {
        modalContent.classList.add('closing'); // Add the class to start the animation

        // Listen for the animation to end
        modalContent.addEventListener('animationend', () => {
          console.log("Close animation finished. Hiding modal and unlocking scroll."); // DEBUG Log
          showcaseModal.classList.add("hidden"); // Hide the modal backdrop
          modalContent.classList.remove('closing'); // Clean up the animation class
          unlockScroll(); // Unlock background scroll

          // Reset video and scroll state (as before)
          if (mainVideo) {
            mainVideo.pause();
            mainVideo.currentTime = 0;
          }
          if (scrollContainer) scrollContainer.scrollTop = 0;
          if (scrollIndicator) scrollIndicator.classList.remove("hidden");
          if (progressBarFill) progressBarFill.style.width = '0%';

        }, { once: true }); // Use { once: true } so the listener removes itself

      } else {
        // Fallback if modalContent isn't found (shouldn't happen)
        showcaseModal.classList.add("hidden");
        unlockScroll();
         if (mainVideo) { mainVideo.pause(); mainVideo.currentTime = 0; }
         if (scrollContainer) scrollContainer.scrollTop = 0;
         if (scrollIndicator) scrollIndicator.classList.remove("hidden");
         if (progressBarFill) progressBarFill.style.width = '0%';
      }
      // --- END NEW ANIMATION LOGIC ---

    });

  });
</script>




    <script src="menu.js"></script>
   <script type="module" src="displaylocalsets.js"></script>
    <script src="search.js"></script>
    <script src="icon.js"></script>
    <script type="module" src="music.js"></script>
    

    <script type="module" src="presence.js"></script>
    
    
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
  import {
    getFirestore, collection, query, orderBy, onSnapshot, getDocs
  } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
  import {
    getAuth, onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCndfcWksvEBhzJDiQmJj_zSRI6FSVNUC0",
    authDomain: "flipcards-7adab.firebaseapp.com",
    projectId: "flipcards-7adab",
    storageBucket: "flipcards-7adab.firebasestorage.app",
    messagingSenderId: "836765717736",
    appId: "1:836765717736:web:ff749a40245798307b655d"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth();

  onAuthStateChanged(auth, async (user) => {
    if (!user) return;
    const currentUser = user.email;
    const chatDot = document.getElementById("chatDot");

    const snapshot = await getDocs(collection(db, "approved_emails"));
    const otherUsers = [];
    snapshot.forEach(doc => {
      if (doc.id !== currentUser) otherUsers.push(doc.id);
    });

    const chatListeners = [];

    otherUsers.forEach(otherEmail => {
      const chatId = [currentUser, otherEmail].sort().join("_to_");
      const q = query(collection(db, 'chats', chatId, 'messages'), orderBy('timestamp'));

      const unsub = onSnapshot(q, snap => {
        let unread = false;

        snap.forEach(doc => {
          const data = doc.data();
          if (
            data.sender === otherEmail &&
            !(data.readBy || []).includes(currentUser)
          ) {
            unread = true;
          }
        });

        if (unread) {
          chatDot.style.display = "block";
        } else {
          // check if any other unread messages exist
          let anyUnread = false;
          for (const listener of chatListeners) {
            if (listener.unread) {
              anyUnread = true;
              break;
            }
          }
          if (!anyUnread) {
            chatDot.style.display = "none";
          }
        }

        // track this chat’s unread state
        const listener = chatListeners.find(l => l.email === otherEmail);
        if (listener) {
          listener.unread = unread;
        } else {
          chatListeners.push({ email: otherEmail, unread });
        }
      });
    });
  });
</script>


    <script>
  document.querySelectorAll('.hover-switch').forEach(img => {
    const defaultSrc = img.getAttribute('data-default');
    const hoverSrc = img.getAttribute('data-hover');

    img.addEventListener('mouseover', () => {
      img.src = hoverSrc;
    });

    img.addEventListener('mouseout', () => {
      img.src = defaultSrc;
    });
  });
</script>
<script type="module" src="./AIgeminibtn.js"></script>


<script type="module">
  import { checkUserStatus } from './userstatuscheck.js';
  checkUserStatus();
</script>


<script type="module" src="member.js"></script>

<script type="module" src="firebaseinit.js"></script>
<script src="flipTimer.js"></script>






<script type="module" src="guestTimer.js"></script>
<script>
  window.showGuestModal = function(message, callback = null) {
    const modal = document.getElementById('guestModal');
    const text = document.getElementById('guestModalMessage');
    text.textContent = message;
    modal.classList.add('visible');
    modal.dataset.callback = callback ? "true" : "";
  }

  window.closeGuestModal = function() {
    const modal = document.getElementById('guestModal');
    modal.classList.remove('visible');
    if (modal.dataset.callback === "true") {
      setTimeout(() => {
        location.href = "index.html";
      }, 300); // Wait for animation to finish
    }
  }
</script>
<script type="module" src="profile.js"></script>
<script type="module">
  import './xpTracker.js';

  // Give +45 XP every 10 minutes
  startTimedXP(5, 45);
</script>
<script type="module" src="generalquestion.js"></script>
<script src="loadingOverlay.js"></script>
<script src="tut.js"></script>
<script type="module" src="leaderboard.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const howItWorksLinks = document.querySelectorAll('a.How');
    howItWorksLinks.forEach(link => {
      link.addEventListener("click", (e) => {
        e.preventDefault(); // Prevent jump to #How section
        showTutorial();     // Show tutorial modal
      });
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const text = "Fuel Focus. Build Memory. Own the Knowledge. Repeat.";
    const target = document.getElementById("typingText");

    let i = 0;
    let isDeleting = false;

    function typeLoop() {
      target.textContent = text.substring(0, i);

      if (!isDeleting) {
        if (i < text.length) {
          i++;
        } else {
          isDeleting = true;
          setTimeout(typeLoop, 1200); // wait before deleting
          return;
        }
      } else {
        if (i > 0) {
          i--;
        } else {
          isDeleting = false;
        }
      }

      setTimeout(typeLoop, isDeleting ? 25 : 75); // typing speed
    }

    typeLoop();
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Select ALL buttons with the new class
    const getStartedButtons = document.querySelectorAll('.js-get-started-btn');

    getStartedButtons.forEach(button => {
      button.addEventListener('click', (event) => {
        // Stop the click from bubbling up to the window
        event.stopPropagation();
        
        // Find the specific modal that belongs to this button
        const container = button.closest('.get-started-container');
        const modal = container.querySelector('.get-started-dropdown');

        // This is a safety check in case the modal doesn't exist
        if (!modal) return;

        // Check if the current modal is already open
        const isAlreadyOpen = !modal.classList.contains('hidden');

        // First, close ALL other open dropdowns on the page
        document.querySelectorAll('.get-started-dropdown').forEach(otherModal => {
          otherModal.classList.add('hidden');
        });
        
        // If the modal was not already open, open it.
        // This logic prevents the button from re-opening the modal in the same click.
        if (!isAlreadyOpen) {
          modal.classList.remove('hidden');
        }
      });
    });

    // Global click listener to close any open modal when clicking outside
    window.addEventListener('click', (event) => {
      const openModal = document.querySelector('.get-started-dropdown:not(.hidden)');
      // If a modal is open and the click was not inside it, hide it
      if (openModal && !openModal.contains(event.target)) {
        openModal.classList.add('hidden');
      }
    });

    // Prevent clicks inside any modal from closing it
    document.querySelectorAll('.get-started-dropdown').forEach(modal => {
      modal.addEventListener('click', event => event.stopPropagation());
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggleBtn = document.getElementById("socialSidebarToggle");
    const sidebar = document.getElementById("socialSidebar");

    toggleBtn.addEventListener("click", () => {
      sidebar.classList.toggle("open");
      toggleBtn.classList.toggle("open");
    });
  });
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const searchToggleBtn = document.getElementById('search-toggle-btn');
    const folderHeader = document.getElementById('folderHeader');
    const folderSearchInput = document.getElementById('folderSearch');

    searchToggleBtn.addEventListener('click', () => {
        // Toggle the active class on the main header container
        folderHeader.classList.toggle('search-active');

        // If the search bar is now active, focus the input field
        if (folderHeader.classList.contains('search-active')) {
            // A short delay allows the transition to start before focusing
            setTimeout(() => {
                folderSearchInput.focus();
            }, 100);
        }
    });
});
</script>
<script type="module" src="invitationListener.js"></script>
<script type="module" src="multiplayer.js"></script>
<script type="module" src="miniprofile.js"></script>


<script src="cookie.js"></script>
<script type="module" src="./AIppt.js"></script>
<script type="module" src="classfav.js"></script>
<!-- include the separate JS file (after other scripts) -->
<script type="module" src="note.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="protect.js"></script>
<script type="module" src="invListClass.js"></script>
<script type="module" src="notificationListener.js"></script>
<script src="pass.js"></script>
<script type="module" src="suggestion.js"></script>
<script type="module" src="notifsugg.js"></script>
<script type="module" src="lobby.js"></script>
<script type="module" src="profile-notifications.js"></script>
</body>
</html>